/*! be-boundless Mon Oct 10 2016 11:20:56 */
var youtubeFlag=!1;$(function(){function a(a,b,c){function d(){i+=1/60;var a=i/j,b=k[h](a);a<1?(requestAnimFrame(d),window.scrollTo(e+(f-e)*b,0)):window.scrollTo(f,0)}var e=window.scrollX||document.documentElement.scrollLeft,f=a||0,g=b||2e3,h=c||"easeOutSine",i=0,j=Math.max(.1,Math.min(Math.abs(e-f)/g,1.2)),k={easeOutSine:function(a){return Math.sin(a*(Math.PI/2))},easeInOutSine:function(a){return-.5*(Math.cos(Math.PI*a)-1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*Math.pow(a,5):.5*(Math.pow(a-2,5)+2)}};d()}function b(b){var c=($("html, body"),$(".activeSection")),d=0;d=b.classList.contains("prevSlide")?c.prev().length?c.prev().offset().left:0:c.next().length?c.next().offset().left:0,a(d,1500,"easeInOutSine"),setTimeout(function(){$(".activeSection").focus()},1e3)}function c(a){n===!0&&(o.style.left=Math.ceil((a<75?75:a)-(m-r))+"px",window.scrollTo(f*s/(p.offsetWidth/a),0))}function d(a){o.style.left=Math.ceil(a/t*q)+"px"}function e(){if(window.scrollX>0){var a=Math.ceil(.02*window.scrollX);H.css({"-webkit-transform":"translate("+a+"px,0)"}),I.css({"-webkit-transform":"translate("+a+"px,0)"})}else window.scrollX<0?(H.css({"-webkit-transform":"translate(0px,0px)"}),I.css({"-webkit-transform":"translate(0px,0px)"})):window.scrollX;J=!0}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();var f=window.innerWidth,g=$("#dyno"),h=$("body"),i=document.getElementsByTagName("section"),j=0,k=!1;window.addEventListener("resize",function(){f=window.innerWidth,offsetX=window.pageXOffset}),document.onkeydown=function(a){var b=$(".prevSlide"),c=$(".nextSlide");if("37"==a.keyCode)b.click().focus();else if("39"==a.keyCode)c.click().focus();else{if("27"!=a.keyCode||!k)return;$("button#empty").click()}},$("#arrows button").on("click",function(a){a.preventDefault(),b(this)});var l=0,m=0,n=!1,o=document.getElementById("scrub"),p=document.getElementById("scrubCont"),q=p.offsetWidth-100,r=0,s=$("section").length-1,t=f*s,u=0,v=!1;window.addEventListener("mousemove",function(a){u=a.clientX,v||window.requestAnimFrame(function(){c(u),v=!0}),v=!1}),p.addEventListener("mousedown",function(a){n=!0,l=a.pageX,m=a.clientX,r=o.offsetLeft}),window.addEventListener("mouseup",function(a){n=!1});var w=0,x=!1,y=null;window.addEventListener("scroll",function(){w=window.pageXOffset,n||window.requestAnimFrame(function(){d(w),x=!0}),x=!1,k||(clearTimeout(y),y=setTimeout(function(){a($(".activeSection").offset().left,600,"easeInOutQuint")},600))});var z=new ScrollMagic.Controller({vertical:!1}),A=(new TimelineMax).to("#slide1text",2,{x:"-100%",ease:Power0.easeInOut},0),B=(new TimelineMax).fromTo("#slide2text",1,{x:"60%",scale:.75},{x:"0%",scale:1.025}),C=(new TimelineMax).fromTo("#slide3text",1,{x:"60%",scale:.75},{x:"0%",scale:1.025}),D=(new TimelineMax).fromTo("#slide4text",1,{x:"60%",scale:.75},{x:"0%",scale:1.025}),E=(new TimelineMax).fromTo("#slide5text",1,{x:"60%",scale:.75},{x:"0%",scale:1.025}),F=(new TimelineMax).fromTo("#slide6text",1,{x:"60%",scale:.75},{x:"0%",scale:1.025}),G=(new TimelineMax).fromTo("#slide7text",1,{x:"60%",scale:.75},{x:"0%",scale:1.025});(new TimelineMax).fromTo("#slide8text",1,{x:"60%",scale:.75},{x:"0%",scale:1.025});$("#content-wrapper section").each(function(a,b){var c=new ScrollMagic.Scene({duration:"100%",triggerElement:this,triggerHook:.5});c.addTo(z),c.setClassToggle(this,"activeSection"),c.on("enter",function(){var b=i[a+1];b&&0===b.style.backgroundImage.length&&(b.style.backgroundImage="url("+b.getAttribute("data-img")+")"||"")})});new ScrollMagic.Scene({duration:"100%",triggerElement:"body",triggerHook:0}).setClassToggle("body","hidePrev").setTween(A).addTo(z),new ScrollMagic.Scene({duration:"125%",triggerElement:"#slide2",triggerHook:.9}).setTween(B).addTo(z),new ScrollMagic.Scene({duration:"125%",triggerElement:"#slide3",triggerHook:.9}).setTween(C).addTo(z),new ScrollMagic.Scene({duration:"125%",triggerElement:"#slide4",triggerHook:.9}).setTween(D).addTo(z),new ScrollMagic.Scene({duration:"125%",triggerElement:"#slide5",triggerHook:.9}).setTween(E).addTo(z),new ScrollMagic.Scene({duration:"125%",triggerElement:"#slide6",triggerHook:.9}).setTween(F).addTo(z),new ScrollMagic.Scene({duration:"125%",triggerElement:"#slide7",triggerHook:.9}).setTween(G).addTo(z),new ScrollMagic.Scene({duration:"100%",triggerElement:"#slides section:last-child",triggerHook:.5}).setClassToggle("body","hideNext").addTo(z);if(scrollConverter.activate(),$(".story-link").on("click",function(a){var b=$(a.target),c=b.data("js")||"test",d=b.data("title")||"Immersive story";j=window.pageXOffset,k=!0,a.preventDefault(),h.addClass("loading"),history.pushState({page:d},d,a.target.href),document.addEventListener("hashChange",function(a){console.log(a)}),g.load(a.target.href+" #immersive-body",function(){scrollConverter.deactivate(j),$.when($.getScript("/wp-content/themes/be-boundless/immersive-stories/js/"+c+".min.js"),$.Deferred(function(a){$(a.resolve)})).done(function(){setTimeout(function(){h.toggleClass("active-story loading"),h.removeClass("active-header")},500),setTimeout(function(){h.addClass("makeStatic")},1e3)})})}),$("button#empty").on("click",function(a){k=!1,a.preventDefault(),h.removeClass("makeStatic"),setTimeout(function(){g.empty(),userClosedMenu||isMobile.matches||$("body").addClass("active-header"),scrollConverter.activate(j)},500),history.back(),"undefined"!=typeof document.body.scrollLeft&&(document.body.scrollLeft=j),"undefined"!=typeof document.documentElement.scrollLeft&&(document.documentElement.scrollLeft=j),h.removeClass("active-story")}),$("body").toggleClass("pageLoaded"),320===window.screen.width&&568===window.screen.height&&navigator.userAgent.match(/iPhone/i)){var H=$("#campaign-header"),I=$("#arrows"),J=(window.scrollX,!0);H.width(f),I.width(f),document.addEventListener("resize",function(){H.width(f),I.width(f)}),document.addEventListener("scroll",function(){J&&(window.requestAnimFrame(e),J=!1)})}});