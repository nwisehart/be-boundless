/*! be-boundless Tue Jul 18 2017 16:15:42 */
var youtubeFlag=!1,currentController;$(function(){function a(a,b,c){function d(){i+=1/60;var a=i/j,b=k[h](a);a<1?(requestAnimFrame(d),window.scrollTo(e+(f-e)*b,0)):window.scrollTo(f,0)}var e=window.scrollX||document.documentElement.scrollLeft,f=a||0,g=b||2e3,h=c||"easeOutSine",i=0,j=Math.max(.1,Math.min(Math.abs(e-f)/g,1.2)),k={easeOutSine:function(a){return Math.sin(a*(Math.PI/2))},easeInOutSine:function(a){return-.5*(Math.cos(Math.PI*a)-1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*Math.pow(a,5):.5*(Math.pow(a-2,5)+2)}};d()}function b(b){var c=($("html, body"),$(".activeSection")),d=0;d=b.classList.contains("prevSlide")?c.prev().length?c.prev().offset().left:0:c.next().length?c.next().offset().left:0,a(d,1500,"easeInOutSine"),setTimeout(function(){$(".activeSection").focus()},1e3)}function c(a){m===!0&&(n.style.left=Math.ceil((a<75?75:a)-(l-q))+"px",window.scrollTo(f*r/(o.offsetWidth/a),0))}function d(a){n.style.left=Math.ceil(a/s*p)+"px"}function e(){if(window.scrollX>0){var a=Math.ceil(.02*window.scrollX);G.css({"-webkit-transform":"translate("+a+"px,0)"}),H.css({"-webkit-transform":"translate("+a+"px,0)"})}else window.scrollX<0?(G.css({"-webkit-transform":"translate(0px,0px)"}),H.css({"-webkit-transform":"translate(0px,0px)"})):window.scrollX;I=!0}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();var f=window.innerWidth,g=$("#dyno"),h=$("body"),i=(document.getElementsByTagName("section"),0),j=!1;window.addEventListener("resize",function(){f=window.innerWidth,offsetX=window.pageXOffset}),document.onkeydown=function(a){var b=$(".prevSlide"),c=$(".nextSlide");if("37"==a.keyCode)b.click().focus();else if("39"==a.keyCode)c.click().focus();else{if("27"!=a.keyCode||!j)return;$("button#empty").click()}},$("#arrows button").on("click",function(a){a.preventDefault(),b(this)});var k=0,l=0,m=!1,n=document.getElementById("scrub"),o=document.getElementById("scrubCont"),p=o.offsetWidth-100,q=0,r=$("section").length-1,s=f*r,t=0,u=!1;window.addEventListener("mousemove",function(a){t=a.clientX,u||window.requestAnimFrame(function(){c(t),u=!0}),u=!1}),o.addEventListener("mousedown",function(a){m=!0,k=a.pageX,l=a.clientX,q=n.offsetLeft}),window.addEventListener("mouseup",function(a){m=!1});var v=0,w=!1,x=null;window.addEventListener("scroll",function(){v=window.pageXOffset,m||window.requestAnimFrame(function(){d(v),w=!0}),w=!1,j||(clearTimeout(x),x=setTimeout(function(){a($(".activeSection").offset().left,600,"easeInOutQuint")},600))});var y=new ScrollMagic.Controller({vertical:!1}),z=(new TimelineMax).to("#slide1text",2,{x:"-100%",ease:Power0.easeInOut},0),A=(new TimelineMax).fromTo("#slide2text",1,{x:"60%",scale:.75},{x:"0%",scale:1.025}),B=(new TimelineMax).fromTo("#slide3text",1,{x:"60%",scale:.75},{x:"0%",scale:1.025}),C=(new TimelineMax).fromTo("#slide4text",1,{x:"60%",scale:.75},{x:"0%",scale:1.025}),D=(new TimelineMax).fromTo("#slide5text",1,{x:"60%",scale:.75},{x:"0%",scale:1.025}),E=(new TimelineMax).fromTo("#slide6text",1,{x:"60%",scale:.75},{x:"0%",scale:1.025}),F=(new TimelineMax).fromTo("#slide7text",1,{x:"60%",scale:.75},{x:"0%",scale:1.025});(new TimelineMax).fromTo("#slide8text",1,{x:"60%",scale:.75},{x:"0%",scale:1.025});$("#content-wrapper section").each(function(a,b){var c=new ScrollMagic.Scene({duration:"100%",triggerElement:this,triggerHook:.5});c.addTo(y),c.setClassToggle(this,"activeSection")});new ScrollMagic.Scene({duration:"100%",triggerElement:"body",triggerHook:0}).setClassToggle("body","hidePrev").setTween(z).addTo(y),new ScrollMagic.Scene({duration:"125%",triggerElement:"#slide2",triggerHook:.9}).setTween(A).addTo(y),new ScrollMagic.Scene({duration:"125%",triggerElement:"#slide3",triggerHook:.9}).setTween(B).addTo(y),new ScrollMagic.Scene({duration:"125%",triggerElement:"#slide4",triggerHook:.9}).setTween(C).addTo(y),new ScrollMagic.Scene({duration:"125%",triggerElement:"#slide5",triggerHook:.9}).setTween(D).addTo(y),new ScrollMagic.Scene({duration:"125%",triggerElement:"#slide6",triggerHook:.9}).setTween(E).addTo(y),new ScrollMagic.Scene({duration:"125%",triggerElement:"#slide7",triggerHook:.9}).setTween(F).addTo(y),new ScrollMagic.Scene({duration:"100%",triggerElement:"#slides section:last-child",triggerHook:.5}).setClassToggle("body","hideNext").addTo(y);if(scrollConverter.activate(),$(".story-link").on("click",function(a){var b=$(a.target),c=b.data("js")||"test",d=b.data("title")||"Immersive story";i=window.pageXOffset,j=!0,a.preventDefault(),h.addClass("loading"),history.pushState({page:d},d,a.target.href),g.load(a.target.href+" #immersive-body",function(){scrollConverter.deactivate(i),$("<link/>",{id:"dynamicCSS",rel:"stylesheet",type:"text/css",href:"/wp-content/themes/be-boundless/immersive-stories/css/"+c+".css"}).appendTo("head"),$.when($.getScript("/wp-content/themes/be-boundless/immersive-stories/js/"+c+".min.js"),$.Deferred(function(a){$(a.resolve)})).done(function(){setTimeout(function(){h.toggleClass("active-story loading")},500),setTimeout(function(){h.addClass("makeStatic")},1e3)})})}),isMobile.matches||$(".related h3").on("click",function(a){$(a.target).parent().parent().toggleClass("related-active")}),$("button#empty").on("click",function(a){j=!1,a.preventDefault(),h.removeClass("makeStatic"),currentController.destroy(),setTimeout(function(){g.empty(),$("#dynamicCSS").remove(),!userClosedMenu&&!isMobile.matches,scrollConverter.activate(i)},500),history.back(),"undefined"!=typeof document.body.scrollLeft&&(document.body.scrollLeft=i),"undefined"!=typeof document.documentElement.scrollLeft&&(document.documentElement.scrollLeft=i),h.removeClass("active-story")}),$("body").toggleClass("pageLoaded"),320===window.screen.width&&568===window.screen.height&&navigator.userAgent.match(/iPhone/i)){var G=$("#campaign-header"),H=$("#arrows"),I=(window.scrollX,!0);G.width(f),H.width(f),document.addEventListener("resize",function(){G.width(f),H.width(f)}),document.addEventListener("scroll",function(){I&&(window.requestAnimFrame(e),I=!1)})}});