var isMobile=window.matchMedia("only screen and (max-width: 768px)");function isEmpty(t){return!$.trim(t.html())}function videoPlay(t){var e=t,i=$("#video"),n=$("body"),o=document.getElementById("boundless-video"),s='<button class="close-video"><span class="top"></span><span class="left"></span><span class="bottom"></span></button><div id="youtube-video"><iframe title="YouTube video" id="embedVid" width='+i.width()+" height="+i.height()+' src="'+e+'" frameborder="0" allowfullscreen autoplay></iframe></div>';isMobile.matches?(o.innerHTML=s,$(".play").click(function(t){t.preventDefault()})):$(".play").click(function(t){t.preventDefault(),o.innerHTML=s,setTimeout(function(){$("#video iframe")[0].focus()},500),$(".close-video").click(function(){$(".play").removeClass("hidden"),n.toggleClass("playing"),o.innerHTML=""}),n.toggleClass("playing")})}function mapInit(){var e=L.map("mapid").setView([47.55,-122.2],12);e.scrollWheelZoom.disable(),L.tileLayer("https://api.mapbox.com/styles/v1/mapbox/light-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoidXd3ZWJ0ZWFtIiwiYSI6ImNpcjNyM20zcjAwMTcxN25tOXIycTc1a3MifQ.wCpOJcC1QNSVgkWYhzDHWw",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',maxZoom:15,minZoom:9}).addTo(e),$.ajax({dataType:"json",url:"/wp-content/themes/be-boundless/immersive-stories/img/education/districts.json",success:function(t){L.geoJson(t,{filter:s,onEachFeature:a,style:n}).addTo(e)}}).error(function(){});var t=L.control({position:"bottomright"});function i(t,e){var i;return i=0<t.properties.DreamPlacementCounts?new L.Icon({iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40],iconUrl:"/wp-content/themes/be-boundless/immersive-stories/img/education/education-map-marker-gold.png"}):new L.Icon({iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40],iconUrl:"/wp-content/themes/be-boundless/immersive-stories/img/education/education-map-marker.png"}),L.marker(e,{icon:i})}function o(t){return chroma.scale(["#00FF00","#FFFF00","#FF0000"]).domain([0,25,100])(t).hex()}function n(t){return{fillColor:o(t.properties.freeredlunch),tabIndex:0}}function s(t,e){return t.properties.freeredlunch}function r(t,e){return 0!==t.geometry.coordinates[0]&&(0<t.properties.StudentTeachers||0===t.properties.StudentTeachers)||"Renton School District"==t.properties.District&&"Lakeridge Elementary School"==t.properties.School}function a(t,e){e.bindPopup(function(t){return white=Math.round(t.properties.PercentWhite),nonWhite=100-white,"<div class='popupbox'><table width='200px'><tr class='district-name row'><td colspan='4'><div class='name'>"+t.properties.NAME+"</div></td></tr><tr class='lunch data row'><td class='percent'>"+Math.round(t.properties.freeredlunch)+"%</td><td colspan='3' class='label'>Free / reduced lunch</td></tr><tr class='grad data row'><td class='percent'>"+Math.round(t.properties.GradRate)+"%</td><td colspan='3' class='label'>Graduation rate</td></tr><tr class='esl data row'><td class='percent'>"+Math.round(t.properties.ESL)+"%</td><td colspan='3' class='label'>ESL</td></tr><tr class='graph row'><td rowspan='5' colspan='4' class='nonWhite'><div class='containerGraph'><div class='bar' style='width:"+nonWhite+"%;'><p>"+nonWhite+"%</p></div><p class='tag'>Students of color</p></div></td></tr></table></div>"}(t))}function l(t,e){e.bindPopup(function(t){return white=Math.round(t.properties.PercentWhite),nonWhite=100-white,popup="<div class='popupbox'><table width='220px'><tr class='district-name row'><td colspan='4'><div class='name'>"+t.properties.School+"</div></td></tr><tr class='lunch data row'><td class='percent'>"+Math.round(t.properties.PercentFreeorReducedPricedMeals)+"%</td><td colspan='3' class='label'>Free / reduced lunch</td></tr>",popup+=0===t.properties.GraduationRate?"":"<tr class='grad data row'><td class='percent'>"+Math.round(t.properties.GraduationRate)+"%</td><td colspan='3' class='label'>Graduation rate</td></tr>",popup+="<tr class='esl data row'><td class='percent'>"+Math.round(t.properties.PercentESL)+"%</td><td colspan='3' class='label'>ESL</td></tr>",popup+=t.properties.StudentTeachers&&0!==t.properties.StudentTeachers?"<tr class='cand data row'><td class='percent'>"+t.properties.StudentTeachers+"</td><td colspan='3' class='label'>Student Teachers</td></tr>":"",popup+=t.properties.SchoolLeaderInternships&&0!==t.properties.SchoolLeaderInternships?"<tr class='cand data row'><td class='percent'>"+t.properties.SchoolLeaderInternships+"</td><td colspan='3' class='label'>School Leader Interns</td></tr>":"",popup+=t.properties.ServiceLearningPlacementsCount&&0!==t.properties.ServiceLearningPlacementsCount?"<tr class='cand data row'><td class='percent'>"+t.properties.ServiceLearningPlacementsCount+"</td><td colspan='3' class='label'>Undergraduate Service Learning Placements</td></tr>":"",popup+=t.properties.DreamPlacementCounts&&0!==t.properties.DreamPlacementCounts?"<tr class='cand data row'><td class='percent'>"+t.properties.DreamPlacementCounts+"</td><td colspan='3' class='label'>Dream Project Mentors</td></tr>":"",popup+="<tr class='graph row'><td rowspan='5' colspan='4' class='nonWhite'><div class='containerGraph'><div class='bar' style='width:"+nonWhite+"%;'><p>"+nonWhite+"%</p></div><p class='tag'>Students of color</p></div></td></tr></table></div>",popup}(t))}t.onAdd=function(t){for(var e=L.DomUtil.create("div","info legend"),i=[0,10,20,30,40,50,60,70,80,90,100],n=0;n<i.length;n++)e.innerHTML+='<i style="background:'+o(i[n])+'">'+(0===n?"<p>0</p>":"")+(10===n?'<p class="hundred">100</p>':"")+"</i> ";return e.innerHTML+='<br/><p class="lunchLabel">FREE / REDUCED LUNCH</p>',e},t.addTo(e),$.ajax({dataType:"json",url:"/wp-content/themes/be-boundless/immersive-stories/img/education/schools2.geojson",success:function(t){school_sites=L.geoJson(t,{filter:r,onEachFeature:l,pointToLayer:i}).addTo(e)}}).error(function(){}),e.on("zoomend",function(t){switch(e.getZoom()){case 15:case 14:case 13:case 12:case 11:school_sites.addTo(e);break;default:e.removeLayer(school_sites)}})}function MediumLightbox(t,e){"use strict";if(t){var u,c={},d=(e=e||{}).margin||50,i=document.createElement("div");i.className="scrollbar-measure",document.body.appendChild(i);var p=i.offsetWidth-i.clientWidth;document.body.removeChild(i),o(),window.addEventListener("resize",o);var n=document.querySelectorAll(t);Array.prototype.forEach.call(n,function(t,e){t.addEventListener("click",s)}),window.addEventListener("scroll",function(){u&&u.click()})}function o(){var t=window,e=document,i=e.documentElement,n=e.getElementsByTagName("body")[0],o=t.innerWidth||i.clientWidth||n.clientWidth,s=t.innerHeight||i.clientHeight||n.clientHeight;c.x=o,c.y=s}function s(){if($(this).parent().toggleClass("active"),this.isZoomed){this.isZoomed=!this.isZoomed,u=null,this.img.style.cssText="",this.wrapper.style.cssText="",this.overlay.className="zoomOverlay";h=this;setTimeout(function(){h.children[0].appendChild(h.img),h.children[0].removeChild(h.wrapper);var t="zoomImg";h.img.classList?h.img.classList.remove(t):h.img.className=h.img.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},300)}else{this.isZoomed=!this.isZoomed,(u=this).img||(this.img=this.getElementsByTagName("img")[0]);var t,e,i=this.img.getBoundingClientRect().height,n=this.img.getBoundingClientRect().width,o=this.img.getBoundingClientRect().left,s=this.img.getBoundingClientRect().top;e=this.img.dataset?(t=this.img.dataset.width,this.img.dataset.height):(t=this.img.getAttribute("data-width"),this.img.getAttribute("data-height")),this.img.classList?this.img.classList.add("zoomImg"):this.img.className+=" zoomImg",this.overlay=document.createElement("div"),this.overlay.id="the-overlay",this.overlay.className="zoomOverlay",this.overlay.style.cssText="height:"+c.y+"px; width: "+c.x+"px; top: -"+(c.y-i)/2+"px; left: -"+(c.x-n)/2+"px;",this.wrapper=document.createElement("div"),this.wrapper.id="the-wrapper",this.wrapper.className="zoomImg-wrap zoomImg-wrap--absolute",this.wrapper.appendChild(this.img),this.wrapper.appendChild(this.overlay),this.children[0].appendChild(this.wrapper);var r=(c.x-p)/2-o-n/2,a=-1*s+(c.y-i)/2,l=1;i<e&&(i==n&&c.y>c.x?l=(c.x-d)/n:i==n&&c.y<c.x?l=(c.y-d)/i:n<i?(l=(c.y-d)/i)*n>c.x&&(l=(c.x-d)/n):i<n&&(l=(c.x-d)/n)*i>c.y&&(l=(c.y-d)/i)),t<l*n&&(l=t/n);var h=this;setTimeout(function(){h.wrapper.style.cssText="transform: translate("+r+"px, "+a+"px) translateZ(0px);-webkit-transform: translate("+r+"px, "+a+"px) translateZ(0px);",h.img.style.cssText="transform: scale("+l+");-webkit-transform: scale("+l+")",h.overlay.className="zoomOverlay show"},0)}}}$(function(){var t=document.getElementById("immersive-give");t&&t.addEventListener("click",function(t){t.preventDefault();var e=$("#immersive-give-iframe");$(".giving-widget").addClass("active"),isEmpty(e)&&$("<iframe>",{src:"https://online.gifts.washington.edu/secure/makeagift/givingOpps.aspx?nobanner=true&source_typ=3&appeal="+t.target.getAttribute("data-appeal")+"&source="+t.target.getAttribute("data-fund"),frameborder:0,width:"100%",height:"auto"}).appendTo("#immersive-give-iframe"),setTimeout(function(){e.find("iframe").focus()},500)});var e=document.getElementById("immersive-give-promoted");e&&(e.addEventListener("click",function(t){t.preventDefault();var e=$("#immersive-give-iframe-promoted");$(".giving-widget-promoted").toggleClass("active"),isEmpty(e)&&$("<iframe>",{src:"https://online.gifts.washington.edu/secure/makeagift/givingOpps.aspx?nobanner=true&source_typ=3&appeal="+t.target.getAttribute("data-appeal")+"&source="+t.target.getAttribute("data-fund"),frameborder:0,width:"100%",height:"auto"}).appendTo("#immersive-give-iframe-promoted"),setTimeout(function(){e.find("iframe").focus()},500)}),$("#close-give").click(function(){$("#immersive-give-iframe-promoted").empty(),$(".giving-widget-promoted").toggleClass("active")})),$(".audio-ctrl").each(function(){var s=$(this);s.attr("aria-pressed","false"),s.click(function(t){t.preventDefault();for(var e=document.body.getElementsByTagName("audio"),i=0;i<e.length;i++)e[i].pause();var n=$(t.target).closest(".audio"),o=n.find("audio")[0];n.addClass("active-audio"),n.find("button").attr("aria-pressed","false"),s.attr("aria-pressed","true"),s.hasClass("audio-play")&&($("audio")[0].pause(),setTimeout(function(){o.play()},1e3)),s.hasClass("audio-pause")&&o.pause(),s.hasClass("audio-read")&&(n.find(".audio-transcript").removeClass("visually-hidden").focus(),n.toggleClass("trans"),s.hasClass("active-transcript")?(n.find(".audio-transcript").addClass("visually-hidden"),s.removeClass("active-transcript"),n.toggleClass("trans")):s.addClass("active-transcript"))})}),$(".read-more").on("click",function(t){t.preventDefault(),$("html, body").animate({scrollTop:document.getElementsByTagName("main")[0].getBoundingClientRect().top-80},{duration:1e3})}),$("#pause").click(function(){var t=$("#intro-vid video");t.get(0).paused?t.get(0).play():t.get(0).pause(),$("#intro-vid").toggleClass("paused")})}),function(a,_,b){var n,o,e,t,L={version:"1.0.0-rc.3+27f05a2"};function i(t){return a["webkit"+t]||a["moz"+t]||a["ms"+t]}function s(t){var e=+new Date,i=Math.max(0,16-(e-n));return n=e+i,a.setTimeout(t,i)}function r(){}"object"==typeof module&&"object"==typeof module.exports?module.exports=L:"function"==typeof define&&define.amd&&define(L),void 0!==a&&(t=a.L,L.noConflict=function(){return a.L=t,this},a.L=L),L.Util={extend:function(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++)for(e in o=arguments[i])t[e]=o[e];return t},create:Object.create||function(t){return r.prototype=t,new r},bind:function(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++L.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,e,i){var n,o,s,r;return r=function(){n=!1,o&&(s.apply(i,o),o=!1)},s=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(r,e),n=!0)}},wrapNum:function(t,e,i){var n=e[1],o=e[0],s=n-o;return t===n&&i?t:((t-o)%s+s)%s+o},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return L.Util.trim(t).split(/\s+/)},setOptions:function(t,e){for(var i in t.hasOwnProperty("options")||(t.options=t.options?L.Util.create(t.options):{}),e)t.options[i]=e[i];return t.options},getParamString:function(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")},template:function(t,n){return t.replace(L.Util.templateRe,function(t,e){var i=n[e];if(i===b)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(n)),i})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},n=0,o=a.requestAnimationFrame||i("RequestAnimationFrame")||s,e=a.cancelAnimationFrame||i("CancelAnimationFrame")||i("CancelRequestAnimationFrame")||function(t){a.clearTimeout(t)},L.Util.requestAnimFrame=function(t,e,i){return i&&o===s?void t.call(e):o.call(a,L.bind(t,e))},L.Util.cancelAnimFrame=function(t){t&&e.call(a,t)},L.extend=L.Util.extend,L.bind=L.Util.bind,L.stamp=L.Util.stamp,L.setOptions=L.Util.setOptions,L.Class=function(){},L.Class.extend=function(t){function e(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var i=e.__super__=this.prototype,n=L.Util.create(i);for(var o in(n.constructor=e).prototype=n,this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);return t.statics&&(L.extend(e,t.statics),delete t.statics),t.includes&&(L.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),n.options&&(t.options=L.Util.extend(L.Util.create(n.options),t.options)),L.extend(n,t),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;t<e;t++)n._initHooks[t].call(this)}},e},L.Class.include=function(t){return L.extend(this.prototype,t),this},L.Class.mergeOptions=function(t){return L.extend(this.prototype.options,t),this},L.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this},L.Evented=L.Class.extend({on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var o=0,s=(t=L.Util.splitWords(t)).length;o<s;o++)this._on(t[o],e,i);return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else for(var o=0,s=(t=L.Util.splitWords(t)).length;o<s;o++)this._off(t[o],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n={listeners:[],count:0},this._events[t]=n),i===this&&(i=b);for(var o={fn:e,ctx:i},s=n.listeners,r=0,a=s.length;r<a;r++)if(s[r].fn===e&&s[r].ctx===i)return;s.push(o),n.count++},_off:function(t,e,i){var n,o,s,r;if(this._events&&(n=this._events[t])){if(o=n.listeners,!e){for(s=0,r=o.length;s<r;s++)o[s].fn=L.Util.falseFn;return void delete this._events[t]}if(i===this&&(i=b),o)for(s=0,r=o.length;s<r;s++){var a=o[s];if(a.ctx===i&&a.fn===e)return a.fn=L.Util.falseFn,n.count--,this._isFiring&&(o=o.slice()),void o.splice(s,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var n=L.Util.extend({},e,{type:t,target:this});if(this._events){var o=this._events[t];if(o){this._isFiring=!0;for(var s=o.listeners,r=0,a=s.length;r<a;r++){var l=s[r];l.fn.call(l.ctx||this,n)}this._isFiring=!1}}return i&&this._propagateEvent(n),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.count)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var o=L.bind(function(){this.off(t,e,i).off(t,o,i)},this);return this.on(t,e,i).on(t,o,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[L.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[L.stamp(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,L.extend({layer:t.target},t),!0)}});var l,h,u,c,d,p,f,m,g,v,y,P,x,w,T,D,M,C,E,S,k=L.Evented.prototype;k.addEventListener=k.on,k.removeEventListener=k.clearAllEventListeners=k.off,k.addOneTimeEventListener=k.once,k.fireEvent=k.fire,k.hasEventListeners=k.listens,L.Mixin={Events:k},c=navigator.userAgent.toLowerCase(),d=_.documentElement,p="ActiveXObject"in a,f=-1!==c.indexOf("webkit"),m=-1!==c.indexOf("phantom"),g=-1!==c.search("android [23]"),v=-1!==c.indexOf("chrome"),y=-1!==c.indexOf("gecko")&&!f&&!a.opera&&!p,P=0===navigator.platform.indexOf("Win"),x="undefined"!=typeof orientation||-1!==c.indexOf("mobile"),w=!a.PointerEvent&&a.MSPointerEvent,T=a.PointerEvent||w,D=p&&"transition"in d.style,M="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!g,C="MozPerspective"in d.style,E="OTransition"in d.style,S=!a.L_NO_TOUCH&&(T||"ontouchstart"in a||a.DocumentTouch&&_ instanceof a.DocumentTouch),L.Browser={ie:p,ielt9:p&&!_.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in _),webkit:f,gecko:y,android:-1!==c.indexOf("android"),android23:g,chrome:v,safari:!v&&-1!==c.indexOf("safari"),win:P,ie3d:D,webkit3d:M,gecko3d:C,opera12:E,any3d:!a.L_DISABLE_3D&&(D||M||C)&&!E&&!m,mobile:x,mobileWebkit:x&&f,mobileWebkit3d:x&&M,mobileOpera:x&&a.opera,mobileGecko:x&&y,touch:!!S,msPointer:!!w,pointer:!!T,retina:1<(a.devicePixelRatio||a.screen.deviceXDPI/a.screen.logicalXDPI)},L.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},L.Point.prototype={clone:function(){return new L.Point(this.x,this.y)},add:function(t){return this.clone()._add(L.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(L.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new L.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new L.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){var e=(t=L.point(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=L.point(t)).x===this.x&&t.y===this.y},contains:function(t){return t=L.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+L.Util.formatNum(this.x)+", "+L.Util.formatNum(this.y)+")"}},L.point=function(t,e,i){return t instanceof L.Point?t:L.Util.isArray(t)?new L.Point(t[0],t[1]):t===b||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new L.Point(t.x,t.y):new L.Point(t,e,i)},L.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])},L.Bounds.prototype={extend:function(t){return t=L.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new L.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new L.Point(this.min.x,this.max.y)},getTopRight:function(){return new L.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof L.Point?L.point(t):L.bounds(t))instanceof L.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=L.bounds(t);var e=this.min,i=this.max,n=t.min,o=t.max,s=o.x>=e.x&&n.x<=i.x,r=o.y>=e.y&&n.y<=i.y;return s&&r},overlaps:function(t){t=L.bounds(t);var e=this.min,i=this.max,n=t.min,o=t.max,s=o.x>e.x&&n.x<i.x,r=o.y>e.y&&n.y<i.y;return s&&r},isValid:function(){return!(!this.min||!this.max)}},L.bounds=function(t,e){return!t||t instanceof L.Bounds?t:new L.Bounds(t,e)},L.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},L.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new L.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},L.DomUtil={get:function(t){return"string"==typeof t?_.getElementById(t):t},getStyle:function(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&_.defaultView){var n=_.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i},create:function(t,e,i){var n=_.createElement(t);return n.className=e||"",i&&i.appendChild(n),n},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},hasClass:function(t,e){if(t.classList!==b)return t.classList.contains(e);var i=L.DomUtil.getClass(t);return 0<i.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)},addClass:function(t,e){if(t.classList!==b)for(var i=L.Util.splitWords(e),n=0,o=i.length;n<o;n++)t.classList.add(i[n]);else if(!L.DomUtil.hasClass(t,e)){var s=L.DomUtil.getClass(t);L.DomUtil.setClass(t,(s?s+" ":"")+e)}},removeClass:function(t,e){t.classList!==b?t.classList.remove(e):L.DomUtil.setClass(t,L.Util.trim((" "+L.DomUtil.getClass(t)+" ").replace(" "+e+" "," ")))},setClass:function(t,e){t.className.baseVal===b?t.className=e:t.className.baseVal=e},getClass:function(t){return t.className.baseVal===b?t.className:t.className.baseVal},setOpacity:function(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&L.DomUtil._setOpacityIE(t,e)},_setOpacityIE:function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"},testProp:function(t){for(var e=_.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1},setTransform:function(t,e,i){var n=e||new L.Point(0,0);t.style[L.DomUtil.TRANSFORM]=(L.Browser.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")},setPosition:function(t,e){t._leaflet_pos=e,L.Browser.any3d?L.DomUtil.setTransform(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos||new L.Point(0,0)}},function(){L.DomUtil.TRANSFORM=L.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var t=L.DomUtil.TRANSITION=L.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(L.DomUtil.TRANSITION_END="webkitTransition"===t||"OTransition"===t?t+"End":"transitionend","onselectstart"in _)L.DomUtil.disableTextSelection=function(){L.DomEvent.on(a,"selectstart",L.DomEvent.preventDefault)},L.DomUtil.enableTextSelection=function(){L.DomEvent.off(a,"selectstart",L.DomEvent.preventDefault)};else{var e=L.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);L.DomUtil.disableTextSelection=function(){if(e){var t=_.documentElement.style;this._userSelect=t[e],t[e]="none"}},L.DomUtil.enableTextSelection=function(){e&&(_.documentElement.style[e]=this._userSelect,delete this._userSelect)}}L.DomUtil.disableImageDrag=function(){L.DomEvent.on(a,"dragstart",L.DomEvent.preventDefault)},L.DomUtil.enableImageDrag=function(){L.DomEvent.off(a,"dragstart",L.DomEvent.preventDefault)},L.DomUtil.preventOutline=function(t){for(;-1===t.tabIndex;)t=t.parentNode;t&&t.style&&(L.DomUtil.restoreOutline(),this._outlineElement=t,this._outlineStyle=t.style.outline,t.style.outline="none",L.DomEvent.on(a,"keydown",L.DomUtil.restoreOutline,this))},L.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,L.DomEvent.off(a,"keydown",L.DomUtil.restoreOutline,this))}}(),L.LatLng=function(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,i!==b&&(this.alt=+i)},L.LatLng.prototype={equals:function(t,e){return!!t&&(t=L.latLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(e===b?1e-9:e))},toString:function(t){return"LatLng("+L.Util.formatNum(this.lat,t)+", "+L.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return L.CRS.Earth.distance(this,L.latLng(t))},wrap:function(){return L.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return L.latLngBounds([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new L.LatLng(this.lat,this.lng,this.alt)}},L.latLng=function(t,e,i){return t instanceof L.LatLng?t:L.Util.isArray(t)&&"object"!=typeof t[0]?3===t.length?new L.LatLng(t[0],t[1],t[2]):2===t.length?new L.LatLng(t[0],t[1]):null:t===b||null===t?t:"object"==typeof t&&"lat"in t?new L.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===b?null:new L.LatLng(t,e,i)},L.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])},L.LatLngBounds.prototype={extend:function(t){var e,i,n=this._southWest,o=this._northEast;if(t instanceof L.LatLng)i=e=t;else{if(!(t instanceof L.LatLngBounds))return t?this.extend(L.latLng(t)||L.latLngBounds(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||o?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),o.lat=Math.max(i.lat,o.lat),o.lng=Math.max(i.lng,o.lng)):(this._southWest=new L.LatLng(e.lat,e.lng),this._northEast=new L.LatLng(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new L.LatLngBounds(new L.LatLng(e.lat-n,e.lng-o),new L.LatLng(i.lat+n,i.lng+o))},getCenter:function(){return new L.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new L.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new L.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof L.LatLng?L.latLng(t):L.latLngBounds(t);var e,i,n=this._southWest,o=this._northEast;return t instanceof L.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=o.lat&&e.lng>=n.lng&&i.lng<=o.lng},intersects:function(t){t=L.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>=e.lat&&n.lat<=i.lat,r=o.lng>=e.lng&&n.lng<=i.lng;return s&&r},overlaps:function(t){t=L.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>e.lat&&n.lat<i.lat,r=o.lng>e.lng&&n.lng<i.lng;return s&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=L.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},L.latLngBounds=function(t,e){return t instanceof L.LatLngBounds?t:new L.LatLngBounds(t,e)},L.Projection={},L.Projection.LonLat={project:function(t){return new L.Point(t.lng,t.lat)},unproject:function(t){return new L.LatLng(t.y,t.x)},bounds:L.bounds([-180,-90],[180,90])},L.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=Math.sin(n*e);return new L.Point(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new L.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(u=6378137*Math.PI,L.bounds([-u,-u],[u,u]))},L.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),n=this.transformation.transform(e.min,i),o=this.transformation.transform(e.max,i);return L.bounds(n,o)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?L.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?L.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,n=t.alt;return L.latLng(i,e,n)}},L.CRS.Simple=L.extend({},L.CRS,{projection:L.Projection.LonLat,transformation:new L.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0}),L.CRS.Earth=L.extend({},L.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,s=Math.sin(n)*Math.sin(o)+Math.cos(n)*Math.cos(o)*Math.cos((e.lng-t.lng)*i);return this.R*Math.acos(Math.min(s,1))}}),L.CRS.EPSG3857=L.extend({},L.CRS.Earth,{code:"EPSG:3857",projection:L.Projection.SphericalMercator,transformation:(h=.5/(Math.PI*L.Projection.SphericalMercator.R),new L.Transformation(h,.5,-h,.5))}),L.CRS.EPSG900913=L.extend({},L.CRS.EPSG3857,{code:"EPSG:900913"}),L.CRS.EPSG4326=L.extend({},L.CRS.Earth,{code:"EPSG:4326",projection:L.Projection.LonLat,transformation:new L.Transformation(1/180,1,-1/180,.5)}),L.Map=L.Evented.extend({options:{crs:L.CRS.EPSG3857,center:b,zoom:b,minZoom:b,maxZoom:b,layers:[],maxBounds:b,renderer:b,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=L.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=L.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==b&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==b&&this.setView(L.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._addLayers(this.options.layers)},setView:function(t,e){return e=e===b?this.getZoom():e,this._resetView(L.latLng(t),e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(L.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(L.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),s=(t instanceof L.Point?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/n),r=this.containerPointToLatLng(o.add(s));return this.setView(r,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():L.latLngBounds(t);var i=L.point(e.paddingTopLeft||e.padding||[0,0]),n=L.point(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o;var s=n.subtract(i).divideBy(2),r=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o);return{center:this.unproject(r.add(a).divideBy(2).add(s),o),zoom:o}},fitBounds:function(t,e){if(!(t=L.latLngBounds(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(L.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return(t=L.latLngBounds(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,L.latLngBounds(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=L.extend({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),o=i.divideBy(2).round(),s=n.subtract(o);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(L.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){this._initEvents(!0);try{delete this._container._leaflet}catch(t){this._container._leaflet=b}for(var t in L.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();return this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),n=L.DomUtil.create("div",i,e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new L.LatLngBounds(e,i)},getMinZoom:function(){return this.options.minZoom===b?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===b?this._layersMaxZoom===b?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=L.latLngBounds(t),i=L.point(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),s=this.getMaxZoom(),r=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(i),h=this.project(a,n).subtract(this.project(r,n)),u=L.Browser.any3d?this.options.zoomSnap:1,c=Math.min(l.x/h.x,l.y/h.y);return n=this.getScaleZoom(c,n),u&&(n=Math.round(n/(u/100))*(u/100),n=e?Math.ceil(n/u)*u:Math.floor(n/u)*u),Math.max(o,Math.min(s,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new L.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new L.Bounds(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===b?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=e===b?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;return e=e===b?this._zoom:e,i.zoom(t*i.scale(e))},project:function(t,e){return e=e===b?this._zoom:e,this.options.crs.latLngToPoint(L.latLng(t),e)},unproject:function(t,e){return e=e===b?this._zoom:e,this.options.crs.pointToLatLng(L.point(t),e)},layerPointToLatLng:function(t){var e=L.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(L.latLng(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(L.latLng(t))},distance:function(t,e){return this.options.crs.distance(L.latLng(t),L.latLng(e))},containerPointToLayerPoint:function(t){return L.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return L.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(L.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(L.latLng(t)))},mouseEventToContainerPoint:function(t){return L.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=L.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");L.DomEvent.addListener(e,"scroll",this._onScroll,this),e._leaflet=!0},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&L.Browser.any3d,L.DomUtil.addClass(t,"leaflet-container"+(L.Browser.touch?" leaflet-touch":"")+(L.Browser.retina?" leaflet-retina":"")+(L.Browser.ielt9?" leaflet-oldie":"")+(L.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=L.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),L.DomUtil.setPosition(this._mapPane,new L.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(L.DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),L.DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){L.DomUtil.setPosition(this._mapPane,new L.Point(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,i){e===b&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return L.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){L.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(L.DomEvent){this._targets={},this._targets[L.stamp(this._container)]=this;var e=t?"off":"on";L.DomEvent[e](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&L.DomEvent[e](a,"resize",this._onResize,this),L.Browser.any3d&&this.options.transform3DLimit&&this[e]("moveend",this._onMoveEnd)}},_onResize:function(){L.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=L.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],o="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,r=!1;s;){if((i=this._targets[L.stamp(s)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){r=!0;break}if(i&&i.listens(e,!0)){if(o&&!L.DomEvent._isExternalTarget(s,t))break;if(n.push(i),o)break}if(s===this._container)break;s=s.parentNode}return n.length||r||o||!L.DomEvent._isExternalTarget(s,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!L.DomEvent._skipped(t)){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===e&&L.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_fireDOMEvent:function(t,e,i){if("click"===t.type){var n=L.Util.extend({},t);n.type="preclick",this._fireDOMEvent(n,n.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e))).length){var o=i[0];"contextmenu"===e&&o.listens(e,!0)&&L.DomEvent.preventDefault(t);var s={originalEvent:t};if("keypress"!==t.type){var r=o instanceof L.Marker;s.containerPoint=r?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=r?o.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var a=0;a<i.length;a++)if(i[a].fire(e,s,!0),s.originalEvent._stopped||i[a].options.nonBubblingEvents&&-1!==L.Util.indexOf(i[a].options.nonBubblingEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return L.DomUtil.getPosition(this._mapPane)||new L.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&e!==b?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),s=new L.Bounds(n.subtract(o),n.add(o)),r=this._getBoundsOffset(s,i,e);return r.round().equals([0,0])?t:this.unproject(n.add(r),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new L.Bounds(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=L.bounds(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),o=n.min.subtract(t.min),s=n.max.subtract(t.max),r=this._rebound(o.x,-s.x),a=this._rebound(o.y,-s.y);return new L.Point(r,a)},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=L.Browser.any3d?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))}}),L.map=function(t,e){return new L.Map(t,e)},L.Layer=L.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[]},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[L.stamp(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[L.stamp(t)],this},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}}),L.Map.include({addLayer:function(t){var e=L.stamp(t);return this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=L.stamp(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&L.stamp(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?L.Util.isArray(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[L.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=L.stamp(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;t=o.minZoom===b?t:Math.min(t,o.minZoom),e=o.maxZoom===b?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?b:e,this._layersMinZoom=t===1/0?b:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange")}}),L.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:L.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,o=this.R_MINOR/i,s=Math.sqrt(1-o*o),r=s*Math.sin(n),a=Math.tan(Math.PI/4-n/2)/Math.pow((1-r)/(1+r),s/2);return n=-i*Math.log(Math.max(a,1e-10)),new L.Point(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,o=this.R_MINOR/n,s=Math.sqrt(1-o*o),r=Math.exp(-t.y/n),a=Math.PI/2-2*Math.atan(r),l=0,h=.1;l<15&&1e-7<Math.abs(h);l++)e=s*Math.sin(a),e=Math.pow((1-e)/(1+e),s/2),a+=h=Math.PI/2-2*Math.atan(r*e)-a;return new L.LatLng(a*i,t.x*i/n)}},L.CRS.EPSG3395=L.extend({},L.CRS.Earth,{code:"EPSG:3395",projection:L.Projection.Mercator,transformation:(l=.5/(Math.PI*L.Projection.Mercator.R),new L.Transformation(l,.5,-l,.5))}),L.GridLayer=L.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:L.Browser.mobile,updateWhenZooming:!0,updateInterval:200,attribution:null,zIndex:1,bounds:null,minZoom:0,maxZoom:b,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){t=L.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),L.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(L.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(L.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=L.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return _.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof L.Point?t:new L.Point(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==b&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),o=0,s=i.length;o<s;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!L.Browser.ielt9){L.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var s=Math.min(1,(t-o.loaded)/200);L.DomUtil.setOpacity(o.el,s),s<1?e=!0:(o.active&&(i=!0),o.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(L.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=L.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=L.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t===b)return b;for(var i in this._levels)this._levels[i].el.children.length||i===t?this._levels[i].el.style.zIndex=e-Math.abs(t-i):(L.DomUtil.remove(this._levels[i].el),this._removeTilesAtZoom(i),delete this._levels[i]);var n=this._levels[t],o=this._map;return n||((n=this._levels[t]={}).el=L.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),L.Util.falseFn(n.el.offsetWidth)),this._level=n},_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)L.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),s=Math.floor(e/2),r=i-1,a=new L.Point(+o,+s);a.z=+r;var l=this._tileCoordsToKey(a),h=this._tiles[l];return h&&h.active?h.retain=!0:(h&&h.loaded&&(h.retain=!0),n<r&&this._retainParent(o,s,r,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var s=2*e;s<2*e+2;s++){var r=new L.Point(o,s);r.z=i+1;var a=this._tileCoordsToKey(r),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(o,s,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,e,i,n){var o=Math.round(e);(this.options.maxZoom!==b&&o>this.options.maxZoom||this.options.minZoom!==b&&o<this.options.minZoom)&&(o=b);var s=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!s||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),o!==b&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();L.Browser.any3d?L.DomUtil.setTransform(t.el,o,n):L.DomUtil.setPosition(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),o=e.project(t,this._tileZoom).floor(),s=e.getSize().divideBy(2*n);return new L.Bounds(o.subtract(s),o.add(s))},_update:function(t){var e=this._map;if(e){var i=e.getZoom();if(t===b&&(t=e.getCenter()),this._tileZoom!==b){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),s=o.getCenter(),r=[],a=this.options.keepBuffer,l=new L.Bounds(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));for(var h in this._tiles){var u=this._tiles[h].coords;u.z===this._tileZoom&&l.contains(L.point(u.x,u.y))||(this._tiles[h].current=!1)}if(1<Math.abs(i-this._tileZoom))return void this._setView(t,i);for(var c=o.min.y;c<=o.max.y;c++)for(var d=o.min.x;d<=o.max.x;d++){var p=new L.Point(d,c);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:r.push(p)}}if(r.sort(function(t,e){return t.distanceTo(s)-e.distanceTo(s)}),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));var m=_.createDocumentFragment();for(d=0;d<r.length;d++)this._addTile(r[d],m);this._level.el.appendChild(m)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return L.latLngBounds(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),o=n.add(i),s=e.wrapLatLng(e.unproject(n,t.z)),r=e.wrapLatLng(e.unproject(o,t.z));return new L.LatLngBounds(s,r)},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new L.Point(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(L.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){L.DomUtil.addClass(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=L.Util.falseFn,t.onmousemove=L.Util.falseFn,L.Browser.ielt9&&this.options.opacity<1&&L.DomUtil.setOpacity(t,this.options.opacity),L.Browser.android&&!L.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),L.bind(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&L.Util.requestAnimFrame(L.bind(this._tileReady,this,t,null,o)),L.DomUtil.setPosition(o,i),this._tiles[n]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){if(this._map){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(L.DomUtil.setOpacity(i.el,0),L.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=L.Util.requestAnimFrame(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),L.DomUtil.addClass(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t}),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),L.Browser.ielt9||!this._map._fadeAnimated?L.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(L.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new L.Point(this._wrapX?L.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?L.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new L.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),L.gridLayer=function(t){return new L.GridLayer(t)},L.TileLayer=L.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=L.setOptions(this,e)).detectRetina&&L.Browser.retina&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),L.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=_.createElement("img");return L.DomEvent.on(i,"load",L.bind(this._tileOnLoad,this,e,i)),L.DomEvent.on(i,"error",L.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:L.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return L.Util.template(this._url,L.extend(e,this.options))},_tileOnLoad:function(t,e){L.Browser.ielt9?setTimeout(L.bind(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&(e.src=n),t(i,e)},getTileSize:function(){var t=this._map,e=L.GridLayer.prototype.getTileSize.call(this),i=this._tileZoom+this.options.zoomOffset,n=this.options.maxNativeZoom;return null!==n&&n<i?e.divideBy(t.getZoomScale(n,i)).round():e},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this.options,e=this._tileZoom;return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,null!==t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=L.Util.falseFn,e.onerror=L.Util.falseFn,e.complete||(e.src=L.Util.emptyImageUrl,L.DomUtil.remove(e)))}}),L.tileLayer=function(t,e){return new L.TileLayer(t,e)},L.TileLayer.WMS=L.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=L.extend({},this.defaultWmsParams);for(var n in e)n in this.options||(i[n]=e[n]);e=L.setOptions(this,e),i.width=i.height=e.tileSize*(e.detectRetina&&L.Browser.retina?2:1),this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),i=this._crs.project(e.getNorthWest()),n=this._crs.project(e.getSouthEast()),o=(1.3<=this._wmsVersion&&this._crs===L.CRS.EPSG4326?[n.y,i.x,i.y,n.x]:[i.x,n.y,n.x,i.y]).join(","),s=L.TileLayer.prototype.getTileUrl.call(this,t);return s+L.Util.getParamString(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,e){return L.extend(this.wmsParams,t),e||this.redraw(),this}}),L.tileLayer.wms=function(t,e){return new L.TileLayer.WMS(t,e)},L.ImageOverlay=L.Layer.extend({options:{opacity:1,alt:"",interactive:!1,attribution:null,crossOrigin:!1},initialize:function(t,e,i){this._url=t,this._bounds=L.latLngBounds(e),L.setOptions(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(L.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){L.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&L.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&L.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getAttribution:function(){return this.options.attribution},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=L.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=L.Util.falseFn,t.onmousemove=L.Util.falseFn,t.onload=L.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),t.zoom,t.center);L.DomUtil.setTransform(this._image,i,e)},_reset:function(){var t=this._image,e=new L.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();L.DomUtil.setPosition(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){L.DomUtil.setOpacity(this._image,this.options.opacity)}}),L.imageOverlay=function(t,e,i){return new L.ImageOverlay(t,e,i)},L.Icon=L.Class.extend({initialize:function(t){L.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var o=L.point(n),s=L.point("shadow"===e&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),s&&(t.style.marginLeft=-s.x+"px",t.style.marginTop=-s.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||_.createElement("img")).src=t,e},_getIconUrl:function(t){return L.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),L.icon=function(t){return new L.Icon(t)},L.Icon.Default=L.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];var i=L.Icon.Default.imagePath;if(!i)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+t+(L.Browser.retina&&"icon"===t?"-2x":"")+".png"}}),L.Icon.Default.imagePath=function(){var t,e,i,n,o=_.getElementsByTagName("script"),s=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,e=o.length;t<e;t++)if((i=o[t].src||"").match(s))return((n=i.split(s)[0])?n+"/":"")+"images"}(),L.Marker=L.Layer.extend({options:{icon:new L.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,e){L.setOptions(this,e),this._latlng=L.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=L.latLng(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),t.alt&&(i.alt=t.alt)),L.DomUtil.addClass(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),s=!1;o!==this._shadow&&(this._removeShadow(),s=!0),o&&L.DomUtil.addClass(o,e),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&s&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),L.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&L.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){L.DomUtil.setPosition(this._icon,t),this._shadow&&L.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(L.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),L.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new L.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;L.DomUtil.setOpacity(this._icon,t),this._shadow&&L.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),L.marker=function(t,e){return new L.Marker(t,e)},L.DivIcon=L.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:_.createElement("div"),i=this.options;if(e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=L.point(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),L.divIcon=function(t){return new L.DivIcon(t)},L.DivOverlay=L.Layer.extend({options:{offset:[0,7],zoomAnimation:!0,className:"",pane:"popupPane"},initialize:function(t,e){L.setOptions(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&this.options.zoomAnimation,this._container||this._initLayout(),t._fadeAnimated&&L.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&L.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(L.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(L.bind(L.DomUtil.remove,L.DomUtil,this._container),200)):L.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=L.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&L.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&L.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=L.point(this.options.offset),i=this._getAnchor();this._zoomAnimated?L.DomUtil.setPosition(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),L.Popup=L.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){L.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof L.Path||this._source.on("preclick",L.DomEvent.stopPropagation))},onRemove:function(t){L.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof L.Path||this._source.off("preclick",L.DomEvent.stopPropagation))},getEvents:function(){var t=L.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=L.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"));if(this.options.closeButton){var i=this._closeButton=L.DomUtil.create("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",L.DomEvent.on(i,"click",this._onCloseButtonClick,this)}var n=this._wrapper=L.DomUtil.create("div",t+"-content-wrapper",e);this._contentNode=L.DomUtil.create("div",t+"-content",n),L.DomEvent.disableClickPropagation(n).disableScrollPropagation(this._contentNode).on(n,"contextmenu",L.DomEvent.stopPropagation),this._tipContainer=L.DomUtil.create("div",t+"-tip-container",e),this._tip=L.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight,s="leaflet-popup-scrolled";o&&o<n?(e.height=o+"px",L.DomUtil.addClass(t,s)):L.DomUtil.removeClass(t,s),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();L.DomUtil.setPosition(this._container,e.add(i))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(L.DomUtil.getStyle(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,o=new L.Point(this._containerLeft,-i-this._containerBottom);this._zoomAnimated&&o._add(L.DomUtil.getPosition(this._container));var s=t.layerPointToContainerPoint(o),r=L.point(this.options.autoPanPadding),a=L.point(this.options.autoPanPaddingTopLeft||r),l=L.point(this.options.autoPanPaddingBottomRight||r),h=t.getSize(),u=0,c=0;s.x+n+l.x>h.x&&(u=s.x+n-h.x+l.x),s.x-u-a.x<0&&(u=s.x-a.x),s.y+i+l.y>h.y&&(c=s.y+i-h.y+l.y),s.y-c-a.y<0&&(c=s.y-a.y),(u||c)&&t.fire("autopanstart").panBy([u,c])}},_onCloseButtonClick:function(t){this._close(),L.DomEvent.stop(t)},_getAnchor:function(){return L.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),L.popup=function(t,e){return new L.Popup(t,e)},L.Map.mergeOptions({closePopupOnClick:!0}),L.Map.include({openPopup:function(t,e,i){return t instanceof L.Popup||(t=new L.Popup(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),L.Layer.include({bindPopup:function(t,e){return t instanceof L.Popup?(L.setOptions(t,e),(this._popup=t)._source=this):(this._popup&&!e||(this._popup=new L.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof L.Layer||(e=t,t=this),t instanceof L.FeatureGroup)for(var i in this._layers){t=this._layers[i];break}return e=e||(t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map)return L.DomEvent.stop(t),e instanceof L.Path?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),L.Marker.include({_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]}}),L.Tooltip=L.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){L.DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){L.DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=L.DivOverlay.prototype.getEvents.call(this);return L.Browser.touch&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=L.DomUtil.create("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,i=this._container,n=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),s=this.options.direction,r=i.offsetWidth,a=i.offsetHeight,l=L.point(this.options.offset),h=this._getAnchor();t="top"===s?t.add(L.point(-r/2+l.x,-a+l.y+h.y)):"bottom"===s?t.subtract(L.point(r/2-l.x,-l.y)):"center"===s?t.subtract(L.point(r/2+l.x,a/2-h.y+l.y)):"right"===s||"auto"===s&&o.x<n.x?(s="right",t.add([l.x+h.x,h.y-a/2+l.y])):(s="left",t.subtract(L.point(r+h.x-l.x,a/2-h.y-l.y))),L.DomUtil.removeClass(i,"leaflet-tooltip-right"),L.DomUtil.removeClass(i,"leaflet-tooltip-left"),L.DomUtil.removeClass(i,"leaflet-tooltip-top"),L.DomUtil.removeClass(i,"leaflet-tooltip-bottom"),L.DomUtil.addClass(i,"leaflet-tooltip-"+s),L.DomUtil.setPosition(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&L.DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return L.point(this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),L.tooltip=function(t,e){return new L.Tooltip(t,e)},L.Map.include({openTooltip:function(t,e,i){return t instanceof L.Tooltip||(t=new L.Tooltip(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),L.Layer.include({bindTooltip:function(t,e){return t instanceof L.Tooltip?(L.setOptions(t,e),(this._tooltip=t)._source=this):(this._tooltip&&!e||(this._tooltip=L.tooltip(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),L.Browser.touch&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof L.Layer||(e=t,t=this),t instanceof L.FeatureGroup)for(var i in this._layers){t=this._layers[i];break}return e=e||(t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(L.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&(L.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:b)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}}),L.Marker.include({_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),L.LayerGroup=L.Layer.extend({initialize:function(t){var e,i;if(this._layers={},t)for(e=0,i=t.length;e<i;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return L.stamp(t)}}),L.layerGroup=function(t){return new L.LayerGroup(t)},L.FeatureGroup=L.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),L.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),L.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new L.LatLngBounds;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),L.featureGroup=function(t){return new L.FeatureGroup(t)},L.Renderer=L.Layer.extend({options:{padding:.1},initialize:function(t){L.setOptions(this,t),L.stamp(this)},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&L.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update()},onRemove:function(){L.DomUtil.remove(this._container)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=L.DomUtil.getPosition(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,e),r=this._map.project(t,e).subtract(s),a=o.multiplyBy(-i).add(n).add(o).subtract(r);L.Browser.any3d?L.DomUtil.setTransform(this._container,a,i):L.DomUtil.setPosition(this._container,a)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom)},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new L.Bounds(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),L.Map.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e=e||(this._renderer=this.options.preferCanvas&&L.canvas()||L.svg()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||t===b)return!1;var e=this._paneRenderers[t];return e===b&&(e=L.SVG&&L.svg({pane:t})||L.Canvas&&L.canvas({pane:t}),this._paneRenderers[t]=e),e}}),L.Path=L.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},getEvents:function(){return{zoomend:this._project,moveend:this._update,viewreset:this._reset}},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return L.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(L.Browser.touch?10:0)}}),L.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var i=t.length,n=new(typeof Uint8Array!=b+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,this._simplifyDPStep(t,n,e,0,i-1);var o,s=[];for(o=0;o<i;o++)n[o]&&s.push(t[o]);return s},_simplifyDPStep:function(t,e,i,n,o){var s,r,a,l=0;for(r=n+1;r<=o-1;r++)l<(a=this._sqClosestPointOnSegment(t[r],t[n],t[o],!0))&&(s=r,l=a);i<l&&(e[s]=1,this._simplifyDPStep(t,e,i,n,s),this._simplifyDPStep(t,e,i,s,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;n<s;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return o<s-1&&i.push(t[s-1]),i},clipSegment:function(t,e,i,n,o){var s,r,a,l=n?this._lastCode:this._getBitCode(t,i),h=this._getBitCode(e,i);for(this._lastCode=h;;){if(!(l|h))return[t,e];if(l&h)return!1;s=l||h,r=this._getEdgeIntersection(t,e,s,i,o),a=this._getBitCode(r,i),s===l?(t=r,l=a):(e=r,h=a)}},_getEdgeIntersection:function(t,e,i,n,o){var s,r,a=e.x-t.x,l=e.y-t.y,h=n.min,u=n.max;return 8&i?(s=t.x+a*(u.y-t.y)/l,r=u.y):4&i?(s=t.x+a*(h.y-t.y)/l,r=h.y):2&i?(s=u.x,r=t.y+l*(u.x-t.x)/a):1&i&&(s=h.x,r=t.y+l*(h.x-t.x)/a),new L.Point(s,r,o)},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,n){var o,s=e.x,r=e.y,a=i.x-s,l=i.y-r,h=a*a+l*l;return 0<h&&(1<(o=((t.x-s)*a+(t.y-r)*l)/h)?(s=i.x,r=i.y):0<o&&(s+=a*o,r+=l*o)),a=t.x-s,l=t.y-r,n?a*a+l*l:new L.Point(s,r)}},L.Polyline=L.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){L.setOptions(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,o=null,s=L.LineUtil._sqClosestPointOnSegment,r=0,a=this._parts.length;r<a;r++)for(var l=this._parts[r],h=1,u=l.length;h<u;h++){var c=s(t,e=l[h-1],i=l[h],!0);c<n&&(n=c,o=s(t,e,i))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){var t,e,i,n,o,s,r,a=this._rings[0],l=a.length;if(!l)return null;for(e=t=0;t<l-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(n=t=0;t<l-1;t++)if(o=a[t],s=a[t+1],e<(n+=i=o.distanceTo(s)))return r=(n-e)/i,this._map.layerPointToLatLng([s.x-r*(s.x-o.x),s.y-r*(s.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=L.latLng(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new L.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=L.Polyline._flat(t),n=0,o=t.length;n<o;n++)i?(e[n]=L.latLng(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new L.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),i=new L.Point(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(i),t.max._add(i),this._pxBounds=t)},_projectLatlngs:function(t,e,i){var n,o,s=t[0]instanceof L.LatLng,r=t.length;if(s){for(o=[],n=0;n<r;n++)o[n]=this._map.latLngToLayerPoint(t[n]),i.extend(o[n]);e.push(o)}else for(n=0;n<r;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,i,n,o,s,r,a,l=this._parts;for(n=e=0,o=this._rings.length;e<o;e++)for(i=0,s=(a=this._rings[e]).length;i<s-1;i++)(r=L.LineUtil.clipSegment(a[i],a[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(r[0]),r[1]===a[i+1]&&i!==s-2||(l[n].push(r[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=L.LineUtil.simplify(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),L.polyline=function(t,e){return new L.Polyline(t,e)},L.Polyline._flat=function(t){return!L.Util.isArray(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]},L.PolyUtil={},L.PolyUtil.clipPolygon=function(t,e,i){var n,o,s,r,a,l,h,u,c,d=[1,4,2,8],p=L.LineUtil;for(o=0,h=t.length;o<h;o++)t[o]._code=p._getBitCode(t[o],e);for(r=0;r<4;r++){for(u=d[r],n=[],o=0,s=(h=t.length)-1;o<h;s=o++)a=t[o],l=t[s],a._code&u?l._code&u||((c=p._getEdgeIntersection(l,a,u,e,i))._code=p._getBitCode(c,e),n.push(c)):(l._code&u&&((c=p._getEdgeIntersection(l,a,u,e,i))._code=p._getBitCode(c,e),n.push(c)),n.push(a));t=n}return t},L.Polygon=L.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){var t,e,i,n,o,s,r,a,l,h=this._rings[0],u=h.length;if(!u)return null;for(s=r=a=0,t=0,e=u-1;t<u;e=t++)i=h[t],n=h[e],o=i.y*n.x-n.y*i.x,r+=(i.x+n.x)*o,a+=(i.y+n.y)*o,s+=3*o;return l=0===s?h[0]:[r/s,a/s],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=L.Polyline.prototype._convertLatLngs.call(this,t),i=e.length;return 2<=i&&e[0]instanceof L.LatLng&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){L.Polyline.prototype._setLatLngs.call(this,t),L.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return L.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new L.Point(e,e);if(t=new L.Bounds(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var n,o=0,s=this._rings.length;o<s;o++)(n=L.PolyUtil.clipPolygon(this._rings[o],t,!0)).length&&this._parts.push(n)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),L.polygon=function(t,e){return new L.Polygon(t,e)},L.Rectangle=L.Polygon.extend({initialize:function(t,e){L.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=L.latLngBounds(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),L.rectangle=function(t,e){return new L.Rectangle(t,e)},L.CircleMarker=L.Path.extend({options:{fill:!0,radius:10},initialize:function(t,e){L.setOptions(this,e),this._latlng=L.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=L.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return L.Path.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new L.Bounds(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),L.circleMarker=function(t,e){return new L.CircleMarker(t,e)},L.Circle=L.CircleMarker.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=L.extend({},i,{radius:e})),L.setOptions(this,e),this._latlng=L.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new L.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:L.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===L.CRS.Earth.distance){var o=Math.PI/180,s=this._mRadius/L.CRS.Earth.R/o,r=i.project([e+s,t]),a=i.project([e-s,t]),l=r.add(a).divideBy(2),h=i.unproject(l).lat,u=Math.acos((Math.cos(s*o)-Math.sin(e*o)*Math.sin(h*o))/(Math.cos(e*o)*Math.cos(h*o)))/o;!isNaN(u)&&0!==u||(u=s/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(u)?0:Math.max(Math.round(l.x-i.project([h,t-u]).x),1),this._radiusY=Math.max(Math.round(l.y-r.y),1)}else{var c=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(c).x}this._updateBounds()}}),L.circle=function(t,e,i){return new L.Circle(t,e,i)},L.SVG=L.Renderer.extend({getEvents:function(){var t=L.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=L.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=L.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){L.Renderer.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),L.DomUtil.setPosition(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" "))}},_initPath:function(t){var e=t._path=L.SVG.create("path");t.options.className&&L.DomUtil.addClass(e,t.options.className),t.options.interactive&&L.DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t)},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){L.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path)},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,L.SVG.pointsToPath(t._parts,e))},_updateCircle:function(t){var e=t._point,i=t._radius,n="a"+i+","+(t._radiusY||i)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){L.DomUtil.toFront(t._path)},_bringToBack:function(t){L.DomUtil.toBack(t._path)}}),L.extend(L.SVG,{create:function(t){return _.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,e){var i,n,o,s,r,a,l="";for(i=0,o=t.length;i<o;i++){for(n=0,s=(r=t[i]).length;n<s;n++)l+=(n?"L":"M")+(a=r[n]).x+" "+a.y;l+=e?L.Browser.svg?"z":"x":""}return l||"M0 0"}}),L.Browser.svg=!(!_.createElementNS||!L.SVG.create("svg").createSVGRect),L.svg=function(t){return L.Browser.svg||L.Browser.vml?new L.SVG(t):null},L.Browser.vml=!L.Browser.svg&&function(){try{var t=_.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}(),L.SVG.include(L.Browser.vml?{_initContainer:function(){this._container=L.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||L.Renderer.prototype._update.call(this)},_initPath:function(t){var e=t._container=L.SVG.create("shape");L.DomUtil.addClass(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=L.SVG.create("path"),e.appendChild(t._path),this._updateStyle(t)},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;L.DomUtil.remove(e),t.removeInteractiveTarget(e)},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(e=e||(t._stroke=L.SVG.create("stroke")),o.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=L.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(o.removeChild(e),t._stroke=null),n.fill?(i=i||(t._fill=L.SVG.create("fill")),o.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(o.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){L.DomUtil.toFront(t._container)},_bringToBack:function(t){L.DomUtil.toBack(t._container)}}:{}),L.Browser.vml&&(L.SVG.create=function(){try{return _.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return _.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return _.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),L.Canvas=L.Renderer.extend({onAdd:function(){L.Renderer.prototype.onAdd.call(this),this._layers=this._layers||{},this._draw()},_initContainer:function(){var t=this._container=_.createElement("canvas");L.DomEvent.on(t,"mousemove",L.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},L.Renderer.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=L.Browser.retina?2:1;L.DomUtil.setPosition(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",L.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y)}},_initPath:function(t){this._updateDashArray(t),this._layers[L.stamp(t)]=t},_addPath:L.Util.falseFn,_removePath:function(t){t._removed=!0,this._requestRedraw(t)},_updatePath:function(t){this._redrawBounds=t._pxBounds,this._draw(!0),t._project(),t._update(),this._draw(),this._redrawBounds=null},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,i=t.options.dashArray.split(","),n=[];for(e=0;e<i.length;e++)n.push(Number(i[e]));t.options._dashArray=n}},_requestRedraw:function(t){if(this._map){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new L.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e])),this._redrawRequest=this._redrawRequest||L.Util.requestAnimFrame(this._redraw,this)}},_redraw:function(){this._redrawRequest=null,this._draw(!0),this._draw(),this._redrawBounds=null},_draw:function(t){this._clear=t;var e,i=this._redrawBounds;for(var n in this._ctx.save(),i&&(this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,i.max.x-i.min.x,i.max.y-i.min.y),this._ctx.clip()),this._layers)e=this._layers[n],(!i||e._pxBounds&&e._pxBounds.intersects(i))&&e._updatePath(),t&&e._removed&&(delete e._removed,delete this._layers[n]);this._ctx.restore()},_updatePoly:function(t,e){var i,n,o,s,r=t._parts,a=r.length,l=this._ctx;if(a){for(this._drawnLayers[t._leaflet_id]=t,l.beginPath(),l.setLineDash&&l.setLineDash(t.options&&t.options._dashArray||[]),i=0;i<a;i++){for(n=0,o=r[i].length;n<o;n++)s=r[i][n],l[n?"lineTo":"moveTo"](s.x,s.y);e&&l.closePath()}this._fillStroke(l,t)}},_updateCircle:function(t){if(!t._empty()){var e=t._point,i=this._ctx,n=t._radius,o=(t._radiusY||n)/n;this._drawnLayers[t._leaflet_id]=t,1!=o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!=o&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=this._clear,n=e.options;t.globalCompositeOperation=i?"destination-out":"source-over",n.fill&&(t.globalAlpha=i?1:n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.globalAlpha=i?1:n.opacity,e._prevWeight=t.lineWidth=i?e._prevWeight+1:n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){var e,i=this._map.mouseEventToLayerPoint(t),n=[];for(var o in this._layers)(e=this._layers[o]).options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(L.DomEvent._fakeStop(t),n.push(e));n.length&&this._fireEvent(n,t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseOut(t,e),this._handleMouseHover(t,e)}},_handleMouseOut:function(t,e){var i=this._hoveredLayer;!i||"mouseout"!==t.type&&i._containsPoint(e)||(L.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){var i,n;for(i in this._drawnLayers)(n=this._drawnLayers[i]).options.interactive&&n._containsPoint(e)&&(L.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n);this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:L.Util.falseFn,_bringToBack:L.Util.falseFn}),L.Browser.canvas=!!_.createElement("canvas").getContext,L.canvas=function(t){return L.Browser.canvas?new L.Canvas(t):null},L.Polyline.prototype._containsPoint=function(t,e){var i,n,o,s,r,a,l=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(n=0,o=(r=(a=this._parts[i]).length)-1;n<r;o=n++)if((e||0!==n)&&L.LineUtil.pointToSegmentDistance(t,a[o],a[n])<=l)return!0;return!1},L.Polygon.prototype._containsPoint=function(t){var e,i,n,o,s,r,a,l,h=!1;if(!this._pxBounds.contains(t))return!1;for(o=0,a=this._parts.length;o<a;o++)for(s=0,r=(l=(e=this._parts[o]).length)-1;s<l;r=s++)i=e[s],n=e[r],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(h=!h);return h||L.Polyline.prototype._containsPoint.call(this,t,!0)},L.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},L.GeoJSON=L.FeatureGroup.extend({initialize:function(t,e){L.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,o=L.Util.isArray(t)?t:t.features;if(o){for(e=0,i=o.length;e<i;e++)((n=o[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var s=this.options;if(s.filter&&!s.filter(t))return this;var r=L.GeoJSON.geometryToLayer(t,s);return r?(r.feature=L.GeoJSON.asFeature(t),r.defaultOptions=r.options,this.resetStyle(r),s.onEachFeature&&s.onEachFeature(t,r),this.addLayer(r)):this},resetStyle:function(t){return t.options=L.Util.extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),L.extend(L.GeoJSON,{geometryToLayer:function(t,e){var i,n,o,s,r="Feature"===t.type?t.geometry:t,a=r?r.coordinates:null,l=[],h=e&&e.pointToLayer,u=e&&e.coordsToLatLng||this.coordsToLatLng;if(!a&&!r)return null;switch(r.type){case"Point":return i=u(a),h?h(t,i):new L.Marker(i);case"MultiPoint":for(o=0,s=a.length;o<s;o++)i=u(a[o]),l.push(h?h(t,i):new L.Marker(i));return new L.FeatureGroup(l);case"LineString":case"MultiLineString":return n=this.coordsToLatLngs(a,"LineString"===r.type?0:1,u),new L.Polyline(n,e);case"Polygon":case"MultiPolygon":return n=this.coordsToLatLngs(a,"Polygon"===r.type?1:2,u),new L.Polygon(n,e);case"GeometryCollection":for(o=0,s=r.geometries.length;o<s;o++){var c=this.geometryToLayer({geometry:r.geometries[o],type:"Feature",properties:t.properties},e);c&&l.push(c)}return new L.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new L.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,i){for(var n,o=[],s=0,r=t.length;s<r;s++)n=e?this.coordsToLatLngs(t[s],e-1,i):(i||this.coordsToLatLng)(t[s]),o.push(n);return o},latLngToCoords:function(t){return t.alt!==b?[t.lng,t.lat,t.alt]:[t.lng,t.lat]},latLngsToCoords:function(t,e,i){for(var n=[],o=0,s=t.length;o<s;o++)n.push(e?L.GeoJSON.latLngsToCoords(t[o],e-1,i):L.GeoJSON.latLngToCoords(t[o]));return!e&&i&&n.push(n[0]),n},getFeature:function(t,e){return t.feature?L.extend({},t.feature,{geometry:e}):L.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var B={toGeoJSON:function(){return L.GeoJSON.getFeature(this,{type:"Point",coordinates:L.GeoJSON.latLngToCoords(this.getLatLng())})}};L.Marker.include(B),L.Circle.include(B),L.CircleMarker.include(B),L.Polyline.prototype.toGeoJSON=function(){var t=!L.Polyline._flat(this._latlngs),e=L.GeoJSON.latLngsToCoords(this._latlngs,t?1:0);return L.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"LineString",coordinates:e})},L.Polygon.prototype.toGeoJSON=function(){var t=!L.Polyline._flat(this._latlngs),e=t&&!L.Polyline._flat(this._latlngs[0]),i=L.GeoJSON.latLngsToCoords(this._latlngs,e?2:t?1:0,!0);return t||(i=[i]),L.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"Polygon",coordinates:i})},L.LayerGroup.include({toMultiPoint:function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),L.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint();var i="GeometryCollection"===t,n=[];return this.eachLayer(function(t){if(t.toGeoJSON){var e=t.toGeoJSON();n.push(i?e.geometry:L.GeoJSON.asFeature(e))}}),i?L.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}}),L.geoJSON=function(t,e){return new L.GeoJSON(t,e)},L.geoJson=L.geoJSON;var z="_leaflet_events";L.DomEvent={on:function(t,e,i,n){if("object"==typeof e)for(var o in e)this._on(t,o,e[o],i);else for(var s=0,r=(e=L.Util.splitWords(e)).length;s<r;s++)this._on(t,e[s],i,n);return this},off:function(t,e,i,n){if("object"==typeof e)for(var o in e)this._off(t,o,e[o],i);else for(var s=0,r=(e=L.Util.splitWords(e)).length;s<r;s++)this._off(t,e[s],i,n);return this},_on:function(e,t,i,n){var o=t+L.stamp(i)+(n?"_"+L.stamp(n):"");if(e[z]&&e[z][o])return this;var s=function(t){return i.call(n||e,t||a.event)},r=s;return L.Browser.pointer&&0===t.indexOf("touch")?this.addPointerListener(e,t,s,o):L.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener?this.addDoubleTapListener(e,s,o):"addEventListener"in e?"mousewheel"===t?e.addEventListener("onwheel"in e?"wheel":"mousewheel",s,!1):"mouseenter"===t||"mouseleave"===t?(s=function(t){t=t||a.event,L.DomEvent._isExternalTarget(e,t)&&r(t)},e.addEventListener("mouseenter"===t?"mouseover":"mouseout",s,!1)):("click"===t&&L.Browser.android&&(s=function(t){return L.DomEvent._filterClick(t,r)}),e.addEventListener(t,s,!1)):"attachEvent"in e&&e.attachEvent("on"+t,s),e[z]=e[z]||{},e[z][o]=s,this},_off:function(t,e,i,n){var o=e+L.stamp(i)+(n?"_"+L.stamp(n):""),s=t[z]&&t[z][o];return s&&(L.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,o):L.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,o):"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",s,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[z][o]=null),this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,L.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return L.DomEvent.on(t,"mousewheel",L.DomEvent.stopPropagation)},disableClickPropagation:function(t){var e=L.DomEvent.stopPropagation;return L.DomEvent.on(t,L.Draggable.START.join(" "),e),L.DomEvent.on(t,{click:L.DomEvent._fakeStop,dblclick:e})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return L.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new L.Point(t.clientX,t.clientY);var i=e.getBoundingClientRect();return new L.Point(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)},_wheelPxFactor:L.Browser.win&&L.Browser.chrome?2:L.Browser.gecko?a.devicePixelRatio:1,getWheelDelta:function(t){return L.Browser.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/L.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(t){L.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_isExternalTarget:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t},_filterClick:function(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=L.DomEvent._lastClick&&i-L.DomEvent._lastClick;return n&&100<n&&n<500||t.target._simulatedClick&&!t._simulated?void L.DomEvent.stop(t):(L.DomEvent._lastClick=i,void e(t))}},L.DomEvent.addListener=L.DomEvent.on,L.DomEvent.removeListener=L.DomEvent.off,L.Draggable=L.Evented.extend({options:{clickTolerance:3},statics:{START:L.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e,i){this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(L.DomEvent.on(this._dragStartTarget,L.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(L.DomEvent.off(this._dragStartTarget,L.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!L.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(L.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&this._enabled&&(L.Draggable._dragging=!0,this._preventOutline&&L.DomUtil.preventOutline(this._element),L.DomUtil.disableImageDrag(),L.DomUtil.disableTextSelection(),!this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new L.Point(e.clientX,e.clientY),L.DomEvent.on(_,L.Draggable.MOVE[t.type],this._onMove,this).on(_,L.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&1<t.touches.length)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new L.Point(e.clientX,e.clientY).subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(L.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=L.DomUtil.getPosition(this._element).subtract(i),L.DomUtil.addClass(_.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,a.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),L.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,L.Util.cancelAnimFrame(this._animRequest),this._lastEvent=t,this._animRequest=L.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),L.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){if(!t._simulated&&this._enabled){for(var e in L.DomUtil.removeClass(_.body,"leaflet-dragging"),this._lastTarget&&(L.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),L.Draggable.MOVE)L.DomEvent.off(_,L.Draggable.MOVE[e],this._onMove,this).off(_,L.Draggable.END[e],this._onUp,this);L.DomUtil.enableImageDrag(),L.DomUtil.enableTextSelection(),this._moved&&this._moving&&(L.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,L.Draggable._dragging=!1}}}),L.Handler=L.Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}}),L.Map.mergeOptions({dragging:!0,inertia:!L.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),L.Map.Drag=L.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new L.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}L.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){L.DomUtil.removeClass(this._map._container,"leaflet-grab"),L.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=L.latLngBounds(this._map.options.maxBounds);this._offsetLimit=L.bounds(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),50<e-this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,r=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{var o=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,r=i.easeLinearity,a=o.multiplyBy(r/s),l=a.distanceTo([0,0]),h=Math.min(i.inertiaMaxSpeed,l),u=a.multiplyBy(h/l),c=h/(i.inertiaDeceleration*r),d=u.multiplyBy(-c/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),L.Util.requestAnimFrame(function(){e.panBy(d,{duration:c,easeLinearity:r,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}}),L.Map.addInitHook("addHandler","dragging",L.Map.Drag),L.Map.mergeOptions({doubleClickZoom:!0}),L.Map.DoubleClickZoom=L.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}}),L.Map.addInitHook("addHandler","doubleClickZoom",L.Map.DoubleClickZoom),L.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),L.Map.ScrollWheelZoom=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){L.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=L.DomEvent.getWheelDelta(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(L.bind(this._performZoom,this),n),L.DomEvent.stop(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,s=i?Math.ceil(o/i)*i:o,r=t._limitZoom(e+(0<this._delta?s:-s))-e;this._delta=0,this._startTime=null,r&&("center"===t.options.scrollWheelZoom?t.setZoom(e+r):t.setZoomAround(this._lastMousePos,e+r))}}),L.Map.addInitHook("addHandler","scrollWheelZoom",L.Map.ScrollWheelZoom),L.extend(L.DomEvent,{_touchstart:L.Browser.msPointer?"MSPointerDown":L.Browser.pointer?"pointerdown":"touchstart",_touchend:L.Browser.msPointer?"MSPointerUp":L.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,n,e){function i(t){if(!(1<(L.Browser.pointer?L.DomEvent._pointersCount:t.touches.length))){var e=Date.now(),i=e-(s||e);r=t.touches?t.touches[0]:t,a=0<i&&i<=250,s=e}}function o(){if(a&&!r.cancelBubble){if(L.Browser.pointer){var t,e,i={};for(e in r)t=r[e],i[e]=t&&t.bind?t.bind(r):t;r=i}r.type="dblclick",n(r),s=null}}var s,r,a=!1,l="_leaflet_",h=this._touchstart,u=this._touchend;return t[l+h+e]=i,t[l+u+e]=o,t[l+"dblclick"+e]=n,t.addEventListener(h,i,!1),t.addEventListener(u,o,!1),L.Browser.edge||t.addEventListener("dblclick",n,!1),this},removeDoubleTapListener:function(t,e){var i="_leaflet_",n=t[i+this._touchstart+e],o=t[i+this._touchend+e],s=t[i+"dblclick"+e];return t.removeEventListener(this._touchstart,n,!1),t.removeEventListener(this._touchend,o,!1),L.Browser.edge||t.removeEventListener("dblclick",s,!1),this}}),L.extend(L.DomEvent,{POINTER_DOWN:L.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:L.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:L.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:L.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,e,i,n){return"touchstart"===e?this._addPointerStart(t,i,n):"touchmove"===e?this._addPointerMove(t,i,n):"touchend"===e&&this._addPointerEnd(t,i,n),this},removePointerListener:function(t,e,i){var n=t["_leaflet_"+e+i];return"touchstart"===e?t.removeEventListener(this.POINTER_DOWN,n,!1):"touchmove"===e?t.removeEventListener(this.POINTER_MOVE,n,!1):"touchend"===e&&(t.removeEventListener(this.POINTER_UP,n,!1),t.removeEventListener(this.POINTER_CANCEL,n,!1)),this},_addPointerStart:function(t,e,i){var n=L.bind(function(t){if("mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(t.target.tagName)<0))return;L.DomEvent.preventDefault(t)}this._handlePointer(t,e)},this);if(t["_leaflet_touchstart"+i]=n,t.addEventListener(this.POINTER_DOWN,n,!1),!this._pointerDocListener){var o=L.bind(this._globalPointerUp,this);_.documentElement.addEventListener(this.POINTER_DOWN,L.bind(this._globalPointerDown,this),!0),_.documentElement.addEventListener(this.POINTER_MOVE,L.bind(this._globalPointerMove,this),!0),_.documentElement.addEventListener(this.POINTER_UP,o,!0),_.documentElement.addEventListener(this.POINTER_CANCEL,o,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,e){for(var i in t.touches=[],this._pointers)t.touches.push(this._pointers[i]);t.changedTouches=[t],e(t)},_addPointerMove:function(t,e,i){var n=L.bind(function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&this._handlePointer(t,e)},this);t["_leaflet_touchmove"+i]=n,t.addEventListener(this.POINTER_MOVE,n,!1)},_addPointerEnd:function(t,e,i){var n=L.bind(function(t){this._handlePointer(t,e)},this);t["_leaflet_touchend"+i]=n,t.addEventListener(this.POINTER_UP,n,!1),t.addEventListener(this.POINTER_CANCEL,n,!1)}}),L.Map.mergeOptions({touchZoom:L.Browser.touch&&!L.Browser.android23,bounceAtZoomLimits:!0}),L.Map.TouchZoom=L.Handler.extend({addHooks:function(){L.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),L.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){L.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),L.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),L.DomEvent.on(_,"touchmove",this._onTouchMove,this).on(_,"touchend",this._onTouchEnd,this),L.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&1<o)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1==o)return}else{var s=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1==o&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),L.Util.cancelAnimFrame(this._animRequest);var r=L.bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=L.Util.requestAnimFrame(r,this,!0),L.DomEvent.preventDefault(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,L.Util.cancelAnimFrame(this._animRequest),L.DomEvent.off(_,"touchmove",this._onTouchMove).off(_,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}}),L.Map.addInitHook("addHandler","touchZoom",L.Map.TouchZoom),L.Map.mergeOptions({tap:!0,tapTolerance:15}),L.Map.Tap=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){L.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(L.DomEvent.preventDefault(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new L.Point(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&L.DomUtil.addClass(i,"leaflet-active"),this._holdTimeout=setTimeout(L.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),L.DomEvent.on(_,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),L.DomEvent.off(_,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&L.DomUtil.removeClass(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new L.Point(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=_.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,a,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}}),L.Browser.touch&&!L.Browser.pointer&&L.Map.addInitHook("addHandler","tap",L.Map.Tap),L.Map.mergeOptions({boxZoom:!0}),L.Map.BoxZoom=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){L.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){return!(!t.shiftKey||1!==t.which&&1!==t.button)&&(this._resetState(),L.DomUtil.disableTextSelection(),L.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),void L.DomEvent.on(_,{contextmenu:L.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=L.DomUtil.create("div","leaflet-zoom-box",this._container),L.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new L.Bounds(this._point,this._startPoint),i=e.getSize();L.DomUtil.setPosition(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(L.DomUtil.remove(this._box),L.DomUtil.removeClass(this._container,"leaflet-crosshair")),L.DomUtil.enableTextSelection(),L.DomUtil.enableImageDrag(),L.DomEvent.off(_,{contextmenu:L.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(L.bind(this._resetState,this),0);var e=new L.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),L.Map.addInitHook("addHandler","boxZoom",L.Map.BoxZoom),L.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),L.Map.Keyboard=L.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),L.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),L.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=_.body,e=_.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),a.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){L.DomEvent.on(_,"keydown",this._onKeyDown,this)},_removeHooks:function(){L.DomEvent.off(_,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;e=this._panKeys[i],t.shiftKey&&(e=L.point(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i)return;n.closePopup()}L.DomEvent.stop(t)}}}),L.Map.addInitHook("addHandler","keyboard",L.Map.Keyboard),L.Handler.MarkerDrag=L.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new L.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),L.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&L.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,i=e._shadow,n=L.DomUtil.getPosition(e._icon),o=e._map.layerPointToLatLng(n);i&&L.DomUtil.setPosition(i,n),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),L.Control=L.Class.extend({options:{position:"topright"},initialize:function(t){L.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return L.DomUtil.addClass(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this},remove:function(){return this._map&&(L.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}}),L.control=function(t){return new L.Control(t)},L.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,e){var i=o+t+" "+o+e;n[t+e]=L.DomUtil.create("div",i,s)}var n=this._controlCorners={},o="leaflet-",s=this._controlContainer=L.DomUtil.create("div",o+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){L.DomUtil.remove(this._controlContainer)}}),L.Control.Zoom=L.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=L.DomUtil.create("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,o){var s=L.DomUtil.create("a",i,n);return s.innerHTML=t,s.href="#",s.title=e,L.DomEvent.on(s,"mousedown dblclick",L.DomEvent.stopPropagation).on(s,"click",L.DomEvent.stop).on(s,"click",o,this).on(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";L.DomUtil.removeClass(this._zoomInButton,e),L.DomUtil.removeClass(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMinZoom()||L.DomUtil.addClass(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMaxZoom()||L.DomUtil.addClass(this._zoomInButton,e)}}),L.Map.mergeOptions({zoomControl:!0}),L.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new L.Control.Zoom,this.addControl(this.zoomControl))}),L.control.zoom=function(t){return new L.Control.Zoom(t)},L.Control.Attribution=L.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){L.setOptions(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=L.DomUtil.create("div","leaflet-control-attribution"),L.DomEvent&&L.DomEvent.disableClickPropagation(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}}),L.Map.mergeOptions({attributionControl:!0}),L.Map.addInitHook(function(){this.options.attributionControl&&(new L.Control.Attribution).addTo(this)}),L.control.attribution=function(t){return new L.Control.Attribution(t)},L.Control.Scale=L.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=L.DomUtil.create("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=L.DomUtil.create("div",e,i)),t.imperial&&(this._iScale=L.DomUtil.create("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,o=3.2808399*t;5280<o?(e=o/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=10<=i?10:5<=i?5:3<=i?3:2<=i?2:1)}}),L.control.scale=function(t){return new L.Control.Scale(t)},L.Control.Layers=L.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1},initialize:function(t,e,i){for(var n in L.setOptions(this,i),this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){return this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(L.stamp(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(L.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):L.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return L.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=L.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),L.DomEvent.disableClickPropagation(e),L.Browser.touch||L.DomEvent.disableScrollPropagation(e);var i=this._form=L.DomUtil.create("form",t+"-list");if(this.options.collapsed){L.Browser.android||L.DomEvent.on(e,{mouseenter:this.expand,mouseleave:this.collapse},this);var n=this._layersLink=L.DomUtil.create("a",t+"-toggle",e);n.href="#",n.title="Layers",L.Browser.touch?L.DomEvent.on(n,"click",L.DomEvent.stop).on(n,"click",this.expand,this):L.DomEvent.on(n,"focus",this.expand,this),L.DomEvent.on(i,"click",function(){setTimeout(L.bind(this._onInputClick,this),0)},this),this._map.on("click",this.collapse,this)}else this.expand();this._baseLayersList=L.DomUtil.create("div",t+"-base",i),this._separator=L.DomUtil.create("div",t+"-separator",i),this._overlaysList=L.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&L.stamp(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;L.DomUtil.empty(this._baseLayersList),L.DomUtil.empty(this._overlaysList);var t,e,i,n,o=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<o,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(L.stamp(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=_.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=_.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=_.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers",n),e.layerId=L.stamp(t.layer),L.DomEvent.on(e,"click",this._onInputClick,this);var o=_.createElement("span");o.innerHTML=" "+t.name;var s=_.createElement("div");return i.appendChild(s),s.appendChild(e),s.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),o=[],s=[];this._handlingClick=!0;for(var r=n.length-1;0<=r;r--)t=n[r],e=this._getLayer(t.layerId).layer,i=this._map.hasLayer(e),t.checked&&!i?o.push(e):!t.checked&&i&&s.push(e);for(r=0;r<s.length;r++)this._map.removeLayer(s[r]);for(r=0;r<o.length;r++)this._map.addLayer(o[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._form.getElementsByTagName("input"),n=this._map.getZoom(),o=i.length-1;0<=o;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.disabled=e.options.minZoom!==b&&n<e.options.minZoom||e.options.maxZoom!==b&&n>e.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),L.control.layers=function(t,e,i){return new L.Control.Layers(t,e,i)},L.PosAnimation=L.Evented.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=L.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=L.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),L.DomUtil.setPosition(this._el,i),this.fire("step")},_complete:function(){L.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),L.Map.include({setView:function(t,e,i){if((e=e===b?this._zoom:this._limitZoom(e),t=this._limitCenter(L.latLng(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i)&&(i.animate!==b&&(i.zoom=L.extend({animate:i.animate},i.zoom),i.pan=L.extend({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},panBy:function(t,e){if(e=e||{},!(t=L.point(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new L.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){L.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){L.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._floor();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i)||(this.panBy(i,e),0))}}),L.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});var U=L.DomUtil.TRANSITION&&L.Browser.any3d&&!L.Browser.mobileOpera;U&&L.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),L.DomEvent.on(this._proxy,L.DomUtil.TRANSITION_END,this._catchTransitionEnd,this))}),L.Map.include(U?{_createAnimProxy:function(){var n=this._proxy=L.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(t){var e=L.DomUtil.TRANSFORM,i=n.style[e];L.DomUtil.setTransform(n,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===n.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();L.DomUtil.setTransform(n,this.project(t,e),this.getZoomScale(e,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(o)||(L.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,i,n){i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,L.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(L.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(L.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),L.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}:{}),L.Map.include({flyTo:function(n,o,t){function e(t){var e=(d*d-c*c+(t?-1:1)*m*m*p*p)/(2*(t?d:c)*m*p),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function i(t){return(Math.exp(t)-Math.exp(-t))/2}function s(t){return(Math.exp(t)+Math.exp(-t))/2}function r(t){return c*(s(_)*function(t){return i(t)/s(t)}(_+f*t)-i(_))/m}if(!1===(t=t||{}).animate||!L.Browser.any3d)return this.setView(n,o,t);this._stop();var a=this.project(this.getCenter()),l=this.project(n),h=this.getSize(),u=this._zoom;n=L.latLng(n),o=o===b?u:o;var c=Math.max(h.x,h.y),d=c*this.getZoomScale(u,o),p=l.distanceTo(a)||1,f=1.42,m=f*f,_=e(0),g=Date.now(),v=(e(1)-_)/f,y=t.duration?1e3*t.duration:1e3*v*.8;return this._moveStart(!0),function t(){var e=(Date.now()-g)/y,i=function(t){return 1-Math.pow(1-t,1.5)}(e)*v;e<=1?(this._flyToFrame=L.Util.requestAnimFrame(t,this),this._move(this.unproject(a.add(l.subtract(a).multiplyBy(r(i)/p)),u),this.getScaleZoom(c/function(t){return c*(s(_)/s(_+f*t))}(i),u),{flyTo:!0})):this._move(n,o)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)}}),L.Map.include({_defaultLocateOptions:{timeout:1e4,watch:!1},locate:function(t){if(t=this._locateOptions=L.extend({},this._defaultLocateOptions,t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=L.bind(this._handleGeolocationResponse,this),i=L.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new L.LatLng(e,i),o=n.toBounds(t.coords.accuracy),s=this._locateOptions;if(s.setView){var r=this.getBoundsZoom(o);this.setView(n,s.maxZoom?Math.min(r,s.maxZoom):r)}var a={latlng:n,bounds:o,timestamp:t.timestamp};for(var l in t.coords)"number"==typeof t.coords[l]&&(a[l]=t.coords[l]);this.fire("locationfound",a)}})}(window,document),function(){var u,o,h,t,a,r,p,c,d,f,l,nt,m,_,n,e,i,ot,g,s,v,y,b,L,P,st,x,w,T,D,M,C,E,S,k,B,z,U,O,A,Z,I,N,rt,R,j,at,F,W,H,lt,G,V,q,Y,$,J,K,X,Q,tt,et,it,ht,ut,ct,dt,pt,ft,mt,_t,gt,vt,yt,bt,Lt=[].slice;function Pt(){var t,e,i,n,o,s,r,a,l;for(s=this,e=[],a=0,n=arguments.length;a<n;a++)null!=(t=arguments[a])&&e.push(t);if(r=e[e.length-1],null!=f[r])s._rgb=g(f[r](gt(e.slice(0,-1))));else{for(d||(c=c.sort(function(t,e){return e.p-t.p}),d=!0),l=0,o=c.length;l<o&&!(r=(i=c[l]).test.apply(i,e));l++);r&&(s._rgb=g(f[r].apply(f,e)))}null==s._rgb&&console.warn("unknown format: "+e),null==s._rgb&&(s._rgb=[0,0,0]),3===s._rgb.length&&s._rgb.push(1)}_t=function(){var i,t,e,n,o;for(i={},n=0,t=(o="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;n<t;n++)e=o[n],i["[object "+e+"]"]=e.toLowerCase();return function(t){var e;return e=Object.prototype.toString.call(t),i[e]||"object"}}(),N=function(t,e,i){return null==e&&(e=0),null==i&&(i=1),t<e&&(t=e),i<t&&(t=i),t},gt=function(t){return 3<=t.length?[].slice.call(t):t[0]},g=function(t){var e;for(e in t)e<3?(t[e]<0&&(t[e]=0),255<t[e]&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),1<t[e]&&(t[e]=1));return t},t=Math.PI,ct=Math.round,v=Math.cos,st=Math.floor,lt=Math.pow,rt=Math.log,pt=Math.sin,ft=Math.sqrt,m=Math.atan2,at=Math.max,nt=Math.abs,p=2*t,a=t/3,o=t/180,r=180/t,ot=function(){return arguments[0]instanceof u?arguments[0]:function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(u,arguments,function(){})},l=[],"undefined"!=typeof module&&null!==module&&null!=module.exports&&(module.exports=ot),"function"==typeof define&&define.amd?define([],function(){return ot}):("undefined"!=typeof exports&&null!==exports?exports:this).chroma=ot,ot.version="1.1.1",f={},d=!(c=[]),Pt.prototype.alpha=function(t){return arguments.length?(this._rgb[3]=t,this):this._rgb[3]},Pt.prototype.toString=function(){return this.name()},u=Pt,ot._input=f,ot.brewer={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ot.colors=vt={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6",rebeccapurple:"#663399"},U=function(){var t,e,i,n,o,s,r,a,l;return o=(e=gt(arguments))[0],t=e[1],i=e[2],a=(o+16)/116,r=isNaN(t)?a:a+t/500,l=isNaN(i)?a:a-i/200,a=h.Yn*O(a),r=h.Xn*O(r),l=h.Zn*O(l),s=bt(3.2404542*r-1.5371385*a-.4985314*l),n=bt(-.969266*r+1.8760108*a+.041556*l),i=bt(.0556434*r-.2040259*a+1.0572252*l),[s=N(s,0,255),n=N(n,0,255),i=N(i,0,255),3<e.length?e[3]:1]},bt=function(t){return ct(255*(t<=.00304?12.92*t:1.055*lt(t,1/2.4)-.055))},O=function(t){return t>h.t1?t*t*t:h.t2*(t-h.t0)},h={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},K=function(){var t,e,i,n,o,s,r;return i=(n=gt(arguments))[0],e=n[1],t=n[2],s=(o=it(i,e,t))[0],[116*(r=o[1])-16,500*(s-r),200*(r-o[2])]},ht=function(t){return(t/=255)<=.04045?t/12.92:lt((t+.055)/1.055,2.4)},yt=function(t){return t>h.t3?lt(t,1/3):t/h.t2+h.t0},it=function(){var t,e,i,n;return i=(n=gt(arguments))[0],e=n[1],t=n[2],i=ht(i),e=ht(e),t=ht(t),[yt((.4124564*i+.3575761*e+.1804375*t)/h.Xn),yt((.2126729*i+.7151522*e+.072175*t)/h.Yn),yt((.0193339*i+.119192*e+.9503041*t)/h.Zn)]},ot.lab=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(u,Lt.call(arguments).concat(["lab"]),function(){})},f.lab=U,u.prototype.lab=function(){return K(this._rgb)},_=function(n){var t,e,i,o,s,r,a,l,h,u,c;return 2===(n=function(){var t,e,i;for(i=[],e=0,t=n.length;e<t;e++)o=n[e],i.push(ot(o));return i}()).length?(h=function(){var t,e,i;for(i=[],e=0,t=n.length;e<t;e++)o=n[e],i.push(o.lab());return i}(),s=h[0],r=h[1],t=function(i){var n,t;return t=function(){var t,e;for(e=[],n=t=0;t<=2;n=++t)e.push(s[n]+i*(r[n]-s[n]));return e}(),ot.lab.apply(ot,t)}):3===n.length?(u=function(){var t,e,i;for(i=[],e=0,t=n.length;e<t;e++)o=n[e],i.push(o.lab());return i}(),s=u[0],r=u[1],a=u[2],t=function(i){var n,t;return t=function(){var t,e;for(e=[],n=t=0;t<=2;n=++t)e.push((1-i)*(1-i)*s[n]+2*(1-i)*i*r[n]+i*i*a[n]);return e}(),ot.lab.apply(ot,t)}):4===n.length?(c=function(){var t,e,i;for(i=[],e=0,t=n.length;e<t;e++)o=n[e],i.push(o.lab());return i}(),s=c[0],r=c[1],a=c[2],l=c[3],t=function(i){var n,t;return t=function(){var t,e;for(e=[],n=t=0;t<=2;n=++t)e.push((1-i)*(1-i)*(1-i)*s[n]+3*(1-i)*(1-i)*i*r[n]+3*(1-i)*i*i*a[n]+i*i*i*l[n]);return e}(),ot.lab.apply(ot,t)}):5===n.length&&(e=_(n.slice(0,3)),i=_(n.slice(2,5)),t=function(t){return t<.5?e(2*t):i(2*(t-.5))}),t},ot.bezier=function(t){var e;return(e=_(t)).scale=function(){return ot.scale(e)},e},ot.cubehelix=function(r,a,l,h,u){var c,d,e;return null==r&&(r=300),null==a&&(a=-1.5),null==l&&(l=1),null==h&&(h=1),null==u&&(u=[0,1]),d=u[1]-u[0],c=0,(e=function(t){var e,i,n,o,s;return e=p*((r+120)/360+a*t),o=lt(u[0]+d*t,h),i=(0!==c?l[0]+t*c:l)*o*(1-o)/2,n=v(e),s=pt(e),ot(g([255*(o+i*(-.14861*n+1.78277*s)),255*(o+i*(-.29227*n-.90649*s)),255*(o+1.97294*n*i)]))}).start=function(t){return null==t?r:(r=t,e)},e.rotations=function(t){return null==t?a:(a=t,e)},e.gamma=function(t){return null==t?h:(h=t,e)},e.hue=function(t){return null==t?l:("array"===_t(l=t)?0===(c=l[1]-l[0])&&(l=l[1]):c=0,e)},e.lightness=function(t){return null==t?u:("array"===_t(u=t)?0===(d=u[1]-u[0])&&(u=u[1]):d=0,e)},e.scale=function(){return ot.scale(e)},e.hue(l),e},ot.random=function(){var t,e;for("0123456789abcdef",t="#",e=0;e<6;++e)t+="0123456789abcdef".charAt(st(16*Math.random()));return new u(t)},ot.average=function(t){var e,i,n,o,s,r,a,l,h;for(l=o=i=e=0,s=t.length,a=0,r=t.length;a<r;a++)n=t[a],l+=(h=ot(n).rgba())[0],o+=h[1],i+=h[2],e+=h[3];return new u(l/s,o/s,i/s,e/s)},f.rgb=function(){var t,e,i,n;for(t in i=[],e=gt(arguments))n=e[t],i.push(n);return i},ot.rgb=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(u,Lt.call(arguments).concat(["rgb"]),function(){})},u.prototype.rgb=function(){return this._rgb.slice(0,3)},u.prototype.rgba=function(){return this._rgb},c.push({p:15,test:function(t){var e;return e=gt(arguments),"array"===_t(e)&&3===e.length?"rgb":4===e.length&&"number"===_t(e[3])&&0<=e[3]&&e[3]<=1?"rgb":void 0}}),x=function(t){var e,i;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[(i=parseInt(t,16))>>16,i>>8&255,255&i,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),[(i=parseInt(t,16))>>24&255,i>>16&255,i>>8&255,ct((255&i)/255*100)/100];if(null!=f.css&&(e=f.css(t)))return e;throw"unknown color: "+t},q=function(t,e){var i,n,o,s,r,a;return null==e&&(e="rgb"),r=t[0],o=t[1],n=t[2],i=t[3],a=(a="000000"+(r<<16|o<<8|n).toString(16)).substr(a.length-6),s=(s="0"+ct(255*i).toString(16)).substr(s.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return a+s;case"argb":return s+a;default:return a}}()},f.hex=function(t){return x(t)},ot.hex=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(u,Lt.call(arguments).concat(["hex"]),function(){})},u.prototype.hex=function(t){return null==t&&(t="rgb"),q(this._rgb,t)},c.push({p:10,test:function(t){if(1===arguments.length&&"string"===_t(t))return"hex"}}),D=function(){var t,e,i,n,o,s,r,a,l,h,u,c,d,p;if(o=(t=gt(arguments))[0],u=t[1],r=t[2],0===u)l=n=e=255*r;else{for(i=[0,0,0],c=2*r-(d=r<.5?r*(1+u):r+u-r*u),(p=[0,0,0])[0]=(o/=360)+1/3,p[1]=o,p[2]=o-1/3,s=a=0;a<=2;s=++a)p[s]<0&&(p[s]+=1),1<p[s]&&(p[s]-=1),6*p[s]<1?i[s]=c+6*(d-c)*p[s]:2*p[s]<1?i[s]=d:3*p[s]<2?i[s]=c+(d-c)*(2/3-p[s])*6:i[s]=c;l=(h=[ct(255*i[0]),ct(255*i[1]),ct(255*i[2])])[0],n=h[1],e=h[2]}return 3<t.length?[l,n,e,t[3]]:[l,n,e]},$=function(t,e,i){var n,o,s,r,a;return void 0!==t&&3<=t.length&&(t=(r=t)[0],e=r[1],i=r[2]),t/=255,e/=255,i/=255,s=Math.min(t,e,i),o=((at=Math.max(t,e,i))+s)/2,at===s?(a=0,n=Number.NaN):a=o<.5?(at-s)/(at+s):(at-s)/(2-at-s),t===at?n=(e-i)/(at-s):e===at?n=2+(i-t)/(at-s):i===at&&(n=4+(t-e)/(at-s)),(n*=60)<0&&(n+=360),[n,a,o]},ot.hsl=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(u,Lt.call(arguments).concat(["hsl"]),function(){})},f.hsl=D,u.prototype.hsl=function(){return $(this._rgb)},M=function(){var t,e,i,n,o,s,r,a,l,h,u,c,d,p,f,m,_,g;if(o=(t=gt(arguments))[0],m=t[1],g=t[2],g*=255,0===m)l=n=e=g;else switch(360===o&&(o=0),360<o&&(o-=360),o<0&&(o+=360),o/=60,s=st(o),i=o-s,r=g*(1-m),a=g*(1-m*i),_=g*(1-m*(1-i)),s){case 0:l=(h=[g,_,r])[0],n=h[1],e=h[2];break;case 1:l=(u=[a,g,r])[0],n=u[1],e=u[2];break;case 2:l=(c=[r,g,_])[0],n=c[1],e=c[2];break;case 3:l=(d=[r,a,g])[0],n=d[1],e=d[2];break;case 4:l=(p=[_,r,g])[0],n=p[1],e=p[2];break;case 5:l=(f=[g,r,a])[0],n=f[1],e=f[2]}return[l=ct(l),n=ct(n),e=ct(e),3<t.length?t[3]:1]},J=function(){var t,e,i,n,o,s,r,a,l;return s=(r=gt(arguments))[0],i=r[1],t=r[2],o=Math.min(s,i,t),e=(at=Math.max(s,i,t))-o,l=at/255,0===at?(n=Number.NaN,a=0):(a=e/at,s===at&&(n=(i-t)/e),i===at&&(n=2+(t-s)/e),t===at&&(n=4+(s-i)/e),(n*=60)<0&&(n+=360)),[n,a,l]},ot.hsv=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(u,Lt.call(arguments).concat(["hsv"]),function(){})},f.hsv=M,u.prototype.hsv=function(){return J(this._rgb)},W=function(t){return"number"===_t(t)&&0<=t&&t<=16777215?[t>>16,t>>8&255,255&t,1]:(console.warn("unknown num color: "+t),[0,0,0,1])},tt=function(){var t;return((t=gt(arguments))[0]<<16)+(t[1]<<8)+t[2]},ot.num=function(t){return new u(t,"num")},u.prototype.num=function(t){return null==t&&(t="rgb"),tt(this._rgb,t)},f.num=W,c.push({p:10,test:function(t){if(1===arguments.length&&"number"===_t(t)&&0<=t&&t<=16777215)return"num"}}),y=function(t){var e,i,n,o,s,r,a,l;if(t=t.toLowerCase(),null!=ot.colors&&ot.colors[t])return x(ot.colors[t]);if(s=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(a=s.slice(1,4),o=r=0;r<=2;o=++r)a[o]=+a[o];a[3]=1}else if(s=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(a=s.slice(1,5),o=l=0;l<=3;o=++l)a[o]=+a[o];else if(s=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(a=s.slice(1,4),o=e=0;e<=2;o=++e)a[o]=ct(2.55*a[o]);a[3]=1}else if(s=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(a=s.slice(1,5),o=i=0;i<=2;o=++i)a[o]=ct(2.55*a[o]);a[3]=+a[3]}else(s=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((n=s.slice(1,4))[1]*=.01,n[2]*=.01,(a=D(n))[3]=1):(s=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((n=s.slice(1,4))[1]*=.01,n[2]*=.01,(a=D(n))[3]=+s[4]);return a},V=function(t){var e;return"rgb"==(e=t[3]<1?"rgba":"rgb")?e+"("+t.slice(0,3).map(ct).join(",")+")":"rgba"==e?e+"("+t.slice(0,3).map(ct).join(",")+","+t[3]+")":void 0},ut=function(t){return ct(100*t)/100},T=function(t,e){var i;return i=e<1?"hsla":"hsl",t[0]=ut(t[0]||0),t[1]=ut(100*t[1])+"%",t[2]=ut(100*t[2])+"%","hsla"==i&&(t[3]=e),i+"("+t.join(",")+")"},f.css=function(t){return y(t)},ot.css=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(u,Lt.call(arguments).concat(["css"]),function(){})},u.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?V(this._rgb):"hsl"===t.slice(0,3)?T(this.hsl(),this.alpha()):void 0},f.named=function(t){return x(vt[t])},c.push({p:20,test:function(t){if(1===arguments.length&&null!=vt[t])return"named"}}),u.prototype.name=function(t){var e,i;for(i in arguments.length&&(vt[t]&&(this._rgb=x(vt[t])),this._rgb[3]=1),e=this.hex(),vt)if(e===vt[i])return i;return e},A=function(){var t,e,i,n;return i=(n=gt(arguments))[0],t=n[1],e=n[2],[i,v(e*=o)*t,pt(e)*t]},Z=function(){var t,e,i,n,o,s,r,a,l,h,u;return a=(i=gt(arguments))[0],o=i[1],r=i[2],t=(h=A(a,o,r))[0],e=h[1],n=h[2],l=(u=U(t,e,n))[0],s=u[1],n=u[2],[N(l,0,255),N(s,0,255),N(n,0,255),3<i.length?i[3]:1]},z=function(){var t,e,i,n,o,s;return o=(s=gt(arguments))[0],t=s[1],e=s[2],i=ft(t*t+e*e),n=(m(e,t)*r+360)%360,0===ct(1e4*i)&&(n=Number.NaN),[o,i,n]},X=function(){var t,e,i,n,o,s,r;return o=(s=gt(arguments))[0],i=s[1],e=s[2],n=(r=K(o,i,e))[0],t=r[1],e=r[2],z(n,t,e)},ot.lch=function(){var t;return t=gt(arguments),new u(t,"lch")},ot.hcl=function(){var t;return t=gt(arguments),new u(t,"hcl")},f.lch=Z,f.hcl=function(){var t,e,i,n;return e=(n=gt(arguments))[0],t=n[1],i=n[2],Z([i,t,e])},u.prototype.lch=function(){return X(this._rgb)},u.prototype.hcl=function(){return X(this._rgb).reverse()},G=function(t){var e,i,n,o,s,r;return null==t&&(t="rgb"),s=(r=gt(arguments))[0],n=r[1],e=r[2],n/=255,e/=255,[(1-(s/=255)-(o=1-Math.max(s,Math.max(n,e))))*(i=o<1?1/(1-o):0),(1-n-o)*i,(1-e-o)*i,o]},s=function(){var t,e,i,n,o,s;return i=(e=gt(arguments))[0],o=e[1],s=e[2],n=e[3],t=4<e.length?e[4]:1,1===n?[0,0,0,t]:[1<=i?0:ct(255*(1-i)*(1-n)),1<=o?0:ct(255*(1-o)*(1-n)),1<=s?0:ct(255*(1-s)*(1-n)),t]},f.cmyk=function(){return s(gt(arguments))},ot.cmyk=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(u,Lt.call(arguments).concat(["cmyk"]),function(){})},u.prototype.cmyk=function(){return G(this._rgb)},f.gl=function(){var t,i,e,n,o;for(n=function(){var t,e;for(i in e=[],t=gt(arguments))o=t[i],e.push(o);return e}.apply(this,arguments),t=e=0;e<=2;t=++e)n[t]*=255;return n},ot.gl=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(u,Lt.call(arguments).concat(["gl"]),function(){})},u.prototype.gl=function(){var t;return[(t=this._rgb)[0]/255,t[1]/255,t[2]/255,t[3]]},Q=function(t,e,i){var n;return t=(n=gt(arguments))[0],e=n[1],i=n[2],.2126*(t=R(t))+.7152*(e=R(e))+.0722*(i=R(i))},R=function(t){return(t/=255)<=.03928?t/12.92:lt((t+.055)/1.055,2.4)},l=[],ot.interpolate=C=function(t,e,i,n){var o,s,r,a;for(null==i&&(i=.5),null==n&&(n="rgb"),"object"!==_t(t)&&(t=ot(t)),"object"!==_t(e)&&(e=ot(e)),r=0,s=l.length;r<s;r++)if(n===(o=l[r])[0]){a=o[1](t,e,i,n);break}if(null==a)throw"color mode "+n+" is not supported";return a.alpha(t.alpha()+i*(e.alpha()-t.alpha())),a},u.prototype.interpolate=function(t,e,i){return C(this,t,e,i)},ot.mix=C,u.prototype.mix=u.prototype.interpolate,B=function(t,e,i,n){var o,s;return o=t._rgb,s=e._rgb,new u(o[0]+i*(s[0]-o[0]),o[1]+i*(s[1]-o[1]),o[2]+i*(s[2]-o[2]),n)},l.push(["rgb",B]),u.prototype.luminance=function(o,s){var t,r,a;return null==s&&(s="rgb"),arguments.length?(0===o?this._rgb=[0,0,0,this._rgb[3]]:1===o?this._rgb=[255,255,255,this._rgb[3]]:(1e-7,r=20,a=function(t,e){var i,n;return i=(n=t.interpolate(e,.5,s)).luminance(),Math.abs(o-i)<1e-7||!r--?n:o<i?a(t,n):a(n,e)},t=Q(this._rgb),this._rgb=(o<t?a(ot("black"),this):a(this,ot("white"))).rgba()),this):Q(this._rgb)},mt=function(t){var e,i,n,o;return e=(o=t/100)<66?(n=255,i=-155.25485562709179-.44596950469579133*(i=o-2)+104.49216199393888*rt(i),o<20?0:.8274096064007395*(e=o-10)-254.76935184120902+115.67994401066147*rt(e)):(n=351.97690566805693+.114206453784165*(n=o-55)-40.25366309332127*rt(n),i=325.4494125711974+.07943456536662342*(i=o-50)-28.0852963507957*rt(i),255),g([n,i,e])},et=function(){var t,e,i,n,o,s,r;for(n=(o=gt(arguments))[0],o[1],t=o[2],i=1e3,e=4e4,.4;.4<e-i;)(s=mt(r=.5*(e+i)))[2]/s[0]>=t/n?e=r:i=r;return ct(r)},ot.temperature=ot.kelvin=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(u,Lt.call(arguments).concat(["temperature"]),function(){})},f.temperature=f.kelvin=f.K=mt,u.prototype.temperature=function(){return et(this._rgb)},u.prototype.kelvin=u.prototype.temperature,ot.contrast=function(t,e){var i,n,o,s;return"string"!==(o=_t(t))&&"number"!==o||(t=new u(t)),"string"!==(s=_t(e))&&"number"!==s||(e=new u(e)),i=t.luminance(),(n=e.luminance())<i?(i+.05)/(n+.05):(n+.05)/(i+.05)},u.prototype.get=function(t){var e,i,n,o,s;return this,n=(o=t.split("."))[0],e=o[1],s=this[n](),e?-1<(i=n.indexOf(e))?s[i]:console.warn("unknown channel "+e+" in mode "+n):s},u.prototype.set=function(t,e){var i,n,o,s,r;if(this,o=(s=t.split("."))[0],i=s[1])if(r=this[o](),-1<(n=o.indexOf(i)))if("string"===_t(e))switch(e.charAt(0)){case"+":case"-":r[n]+=+e;break;case"*":r[n]*=+e.substr(1);break;case"/":r[n]/=+e.substr(1);break;default:r[n]=+e}else r[n]=e;else console.warn("unknown channel "+i+" in mode "+o);else r=e;return this._rgb=ot(r,o).alpha(this.alpha())._rgb,this},u.prototype.darken=function(t){var e;return null==t&&(t=1),(e=this.lab())[0]-=h.Kn*t,ot.lab(e).alpha(this.alpha())},u.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},u.prototype.darker=u.prototype.darken,u.prototype.brighter=u.prototype.brighten,u.prototype.saturate=function(t){var e;return null==t&&(t=1),(e=this.lch())[1]+=t*h.Kn,e[1]<0&&(e[1]=0),ot.lch(e).alpha(this.alpha())},u.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},u.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),ot(e[0]*t,e[1]*t,e[2]*t,t)},F=function(t,e){return t*e/255},b=function(t,e){return e<t?e:t},I=function(t,e){return e<t?t:e},dt=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},H=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},i=function(t,e){return 255*(1-(1-e/255)/(t/255))},L=function(t,e){return 255===t?255:255<(t=e/255*255/(1-t/255))?255:t},(n=function(t,e,i){if(!n[i])throw"unknown blend mode "+i;return n[i](t,e)}).normal=(e=function(o){return function(t,e){var i,n;return i=ot(e).rgb(),n=ot(t).rgb(),ot(o(i,n),"rgb")}})((P=function(s){return function(t,e){var i,n,o;for(o=[],i=n=0;n<=3;i=++n)o[i]=s(t[i],e[i]);return o}})(function(t,e){return t})),n.multiply=e(P(F)),n.screen=e(P(dt)),n.overlay=e(P(H)),n.darken=e(P(b)),n.lighten=e(P(I)),n.dodge=e(P(L)),n.burn=e(P(i)),ot.blend=n,ot.analyze=function(t){var e,i,n,o;for(n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},i=0,e=t.length;i<e;i++)null==(o=t[i])||isNaN(o)||(n.values.push(o),n.sum+=o,o<n.min&&(n.min=o),o>n.max&&(n.max=o),n.count+=1);return n.domain=[n.min,n.max],n.limits=function(t,e){return ot.limits(n,t,e)},n},ot.scale=function(h,t){var u,c,d,e,p,f,m,_,g,i,v,y,r,b,L,P,l,n,x;return _="rgb",g=ot("#ccc"),!1,p=[r=0,1],y=[],u=!(v=[0,0]),i=!(d=[]),m=0,e=!(f=1),c={},n=function(t){var e,i,n,o,s,r,a;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===_t(t)&&null!=(null!=(o=ot.brewer)?o[t]:void 0)&&(t=ot.brewer[t]),"array"===_t(t)){for(e=n=0,s=(t=t.slice(0)).length-1;0<=s?n<=s:s<=n;e=0<=s?++n:--n)i=t[e],"string"===_t(i)&&(t[e]=ot(i));for(e=a=y.length=0,r=t.length-1;0<=r?a<=r:r<=a;e=0<=r?++a:--a)y.push(e/(t.length-1))}return l(),d=t},L=function(t){var e,i;if(null==u)return 0;for(i=u.length-1,e=0;e<i&&t>=u[e];)e++;return e-1},x=function(t){return t},function(t){var e,i,n,o,s;return s=t,2<u.length&&(o=u.length-1,e=L(t),n=u[0]+(u[1]-u[0])*(0+.5*r),i=u[o-1]+(u[o]-u[o-1])*(1-.5*r),s=m+(u[e]+.5*(u[e+1]-u[e])-n)/(i-n)*(f-m)),s},P=function(t,e){var i,n,o,s,r,a,l;if(null==e&&(e=!1),isNaN(t))return g;if(l=e?t:u&&2<u.length?(l=L(t)/(u.length-2),v[0]+l*(1-v[0]-v[1])):f!==m?(l=(t-m)/(f-m),l=v[0]+l*(1-v[0]-v[1]),Math.min(1,Math.max(0,l))):1,e||(l=x(l)),o=Math.floor(1e4*l),c[o])i=c[o];else{if("array"===_t(d))for(n=s=0,a=y.length-1;0<=a?s<=a:a<=s;n=0<=a?++s:--s){if(l<=(r=y[n])){i=d[n];break}if(r<=l&&n===y.length-1){i=d[n];break}if(r<l&&l<y[n+1]){l=(l-r)/(y[n+1]-r),i=ot.interpolate(d[n],d[n+1],l,_);break}}else"function"===_t(d)&&(i=d(l));c[o]=i}return i},l=function(){return c={}},n(h),(b=function(t){var e;return e=ot(P(t)),i&&e[i]?e[i]():e}).classes=function(t){var e;return null!=t?("array"===_t(t)?p=[(u=t)[0],t[t.length-1]]:(e=ot.analyze(p),u=0===t?[e.min,e.max]:ot.limits(e,"e",t)),b):u},b.domain=function(t){var e,i,n,o,s,r,a;if(!arguments.length)return p;if(m=t[0],f=t[t.length-1],y=[],n=d.length,t.length===n&&m!==f)for(s=0,o=t.length;s<o;s++)i=t[s],y.push((i-m)/(f-m));else for(e=a=0,r=n-1;0<=r?a<=r:r<=a;e=0<=r?++a:--a)y.push(e/(n-1));return p=[m,f],b},b.mode=function(t){return arguments.length?(_=t,l(),b):_},b.range=function(t,e){return n(t),b},b.out=function(t){return i=t,b},b.spread=function(t){return arguments.length?(r=t,b):r},b.correctLightness=function(t){return null==t&&(t=!0),e=t,l(),x=e?function(t){var e,i,n,o,s,r,a,l,h;for(e=P(0,!0).lab()[0],i=P(1,!0).lab()[0],a=i<e,n=P(t,!0).lab()[0],o=n-(s=e+(i-e)*t),l=0,h=1,r=20;.01<Math.abs(o)&&0<r--;)a&&(o*=-1),t+=o<0?.5*(h-(l=t)):.5*(l-(h=t)),n=P(t,!0).lab()[0],o=n-s;return t}:function(t){return t},b},b.padding=function(t){return null!=t?("number"===_t(t)&&(t=[t,t]),v=t,b):v},b.colors=function(){var e,i,t,n,o,s,r,a,l;if(n=0,o="hex",1===arguments.length&&("string"===_t(arguments[0])?o=arguments[0]:n=arguments[0]),2===arguments.length&&(n=arguments[0],o=arguments[1]),n)return i=p[0],e=p[1]-i,function(){r=[];for(var t=0;0<=n?t<n:n<t;0<=n?t++:t--)r.push(t);return r}.apply(this).map(function(t){return b(i+t/(n-1)*e)[o]()});if(h=[],a=[],u&&2<u.length)for(t=l=1,s=u.length;1<=s?l<s:s<l;t=1<=s?++l:--l)a.push(.5*(u[t-1]+u[t]));else a=p;return a.map(function(t){return b(t)[o]()})},b},null==ot.scales&&(ot.scales={}),ot.scales.cool=function(){return ot.scale([ot.hsl(180,1,.9),ot.hsl(250,.7,.4)])},ot.scales.hot=function(){return ot.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},ot.analyze=function(t,i,n){var o,e,s,r,a,l;if(a={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),o=function(t){null==t||isNaN(t)||(a.values.push(t),a.sum+=t,t<a.min&&(a.min=t),t>a.max&&(a.max=t),a.count+=1)},l=function(t,e){if(n(t,e))return o(null!=i&&"function"===_t(i)?i(t):null!=i&&"string"===_t(i)||"number"===_t(i)?t[i]:t)},"array"===_t(t))for(r=0,s=t.length;r<s;r++)l(t[r]);else for(e in t)l(t[e],e);return a.domain=[a.min,a.max],a.limits=function(t,e){return ot.limits(a,t,e)},a},ot.limits=function(t,e,i){var n,o,s,r,a,l,h,u,c,d,p,f,m,_,g,v,y,b,L,P,x,w,T,D,M,C,E,S,k,B,z,U,O,A,Z,I,N,R,j,F,W,H,G,V,q,Y,$,J,K,X,Q,tt,et,it;if(null==e&&(e="equal"),null==i&&(i=7),"array"===_t(t)&&(t=ot.analyze(t)),M=t.min,at=t.max,t.sum,et=t.values.sort(function(t,e){return t-e}),T=[],"c"===e.substr(0,1)&&(T.push(M),T.push(at)),"e"===e.substr(0,1)){for(T.push(M),P=z=1,Z=i-1;1<=Z?z<=Z:Z<=z;P=1<=Z?++z:--z)T.push(M+P/i*(at-M));T.push(at)}else if("l"===e.substr(0,1)){if(M<=0)throw"Logarithmic scales are only possible for values > 0";for(C=Math.LOG10E*rt(M),D=Math.LOG10E*rt(at),T.push(M),P=it=1,I=i-1;1<=I?it<=I:I<=it;P=1<=I?++it:--it)T.push(lt(10,C+P/i*(D-C)));T.push(at)}else if("q"===e.substr(0,1)){for(T.push(M),P=n=1,H=i-1;1<=H?n<=H:H<=n;P=1<=H?++n:--n)U=et.length*P/i,(O=st(U))===U?T.push(et[O]):(A=U-O,T.push(et[O]*A+et[O+1]*(1-A)));T.push(at)}else if("k"===e.substr(0,1)){for(S=et.length,_=new Array(S),b=new Array(i),X=!0,k=0,v=null,(v=[]).push(M),P=o=1,G=i-1;1<=G?o<=G:G<=o;P=1<=G?++o:--o)v.push(M+P/i*(at-M));for(v.push(at);X;){for(x=s=0,V=i-1;0<=V?s<=V:V<=s;x=0<=V?++s:--s)b[x]=0;for(P=r=0,q=S-1;0<=q?r<=q:q<=r;P=0<=q?++r:--r){for(tt=et[P],E=Number.MAX_VALUE,x=a=0,Y=i-1;0<=Y?a<=Y:Y<=a;x=0<=Y?++a:--a)(L=nt(v[x]-tt))<E&&(E=L,g=x);b[g]++,_[P]=g}for(B=new Array(i),x=l=0,$=i-1;0<=$?l<=$:$<=l;x=0<=$?++l:--l)B[x]=null;for(P=h=0,J=S-1;0<=J?h<=J:J<=h;P=0<=J?++h:--h)null===B[y=_[P]]?B[y]=et[P]:B[y]+=et[P];for(x=u=0,K=i-1;0<=K?u<=K:K<=u;x=0<=K?++u:--u)B[x]*=1/b[x];for(X=!1,x=c=0,N=i-1;0<=N?c<=N:N<=c;x=0<=N?++c:--c)if(B[x]!==v[P]){X=!0;break}v=B,200<++k&&(X=!1)}for(w={},x=d=0,R=i-1;0<=R?d<=R:R<=d;x=0<=R?++d:--d)w[x]=[];for(P=p=0,j=S-1;0<=j?p<=j:j<=p;P=0<=j?++p:--p)w[y=_[P]].push(et[P]);for(Q=[],x=f=0,F=i-1;0<=F?f<=F:F<=f;x=0<=F?++f:--f)Q.push(w[x][0]),Q.push(w[x][w[x].length-1]);for(Q=Q.sort(function(t,e){return t-e}),T.push(Q[0]),P=m=1,W=Q.length-1;m<=W;P=m+=2)isNaN(Q[P])||T.push(Q[P])}return T},w=function(t,e,i){var n,o,s,r;return t=(n=gt(arguments))[0],e=n[1],i=n[2],(t/=360)<1/3?s=1-((o=(1-e)/3)+(r=(1+e*v(p*t)/v(a-p*t))/3)):t<2/3?o=1-((r=(1-e)/3)+(s=(1+e*v(p*(t-=1/3))/v(a-p*t))/3)):r=1-((s=(1-e)/3)+(o=(1+e*v(p*(t-=2/3))/v(a-p*t))/3)),[255*(r=N(i*r*3)),255*(s=N(i*s*3)),255*(o=N(i*o*3)),3<n.length?n[3]:1]},Y=function(){var t,e,i,n,o,s,r;return o=(s=gt(arguments))[0],e=s[1],t=s[2],p=2*Math.PI,o/=255,e/=255,t/=255,0==(r=1-Math.min(o,e,t)/(n=(o+e+t)/3))?i=0:(i=(o-e+(o-t))/2,i/=Math.sqrt((o-e)*(o-e)+(o-t)*(e-t)),i=Math.acos(i),e<t&&(i=p-i),i/=p),[360*i,r,n]},ot.hsi=function(){return function(t,e,i){i.prototype=t.prototype;var n=new i,o=t.apply(n,e);return Object(o)===o?o:n}(u,Lt.call(arguments).concat(["hsi"]),function(){})},f.hsi=w,u.prototype.hsi=function(){return Y(this._rgb)},E=function(t,e,i,n){var o,s,r,a,l,h,u,c,d,p;return"hsl"===n?(d=t.hsl(),p=e.hsl()):"hsv"===n?(d=t.hsv(),p=e.hsv()):"hsi"===n?(d=t.hsi(),p=e.hsi()):"lch"!==n&&"hcl"!==n||(n="hcl",d=t.hcl(),p=e.hcl()),"h"===n.substr(0,1)&&(s=d[0],u=d[1],a=d[2],r=p[0],c=p[1],l=p[2]),isNaN(s)||isNaN(r)?isNaN(s)?isNaN(r)?o=Number.NaN:(o=r,1!==a&&0!==a||"hsv"===n||(h=c)):(o=s,1!==l&&0!==l||"hsv"===n||(h=u)):o=s+i*(s<r&&180<r-s?r-(s+360):r<s&&180<s-r?r+360-s:r-s),null==h&&(h=u+i*(c-u)),ot[n](o,h,a+i*(l-a))},k=function(t,e,i,n){var o,s;return o=t.num(),s=e.num(),ot.num(o+(s-o)*i,"num")},(l=l.concat(function(){var t,e,i,n;for(n=[],e=0,t=(i=["hsv","hsl","hsi","hcl","lch"]).length;e<t;e++)j=i[e],n.push([j,E]);return n}())).push(["num",k]),S=function(t,e,i,n){var o,s;return o=t.lab(),s=e.lab(),new u(o[0]+i*(s[0]-o[0]),o[1]+i*(s[1]-o[1]),o[2]+i*(s[2]-o[2]),n)},l.push(["lab",S])}.call(this),$(function(){var t=new ScrollMagic.Controller;currentController=t;var e=(new TimelineMax).add([TweenMax.to(".school-pic",1,{y:"-50%",ease:Power0.easeOut}),TweenMax.to(".blurb1",.5,{x:"-100%",opacity:0},1),TweenMax.to(".blurb2",.5,{x:"0",opacity:1})]);new ScrollMagic.Scene({triggerElement:".school-zoom",triggerHook:.45,duration:"100%"}).setTween(e).addTo(t),new ScrollMagic.Scene({triggerElement:"#pic1",triggerHook:.7,duration:"65%"}).setTween(TweenMax.from("#pic1 .pic-2",1,{x:"100%",ease:Power0.easeIn})).addTo(t),new ScrollMagic.Scene({triggerElement:"#pic2",triggerHook:.6,duration:"25%"}).setTween(TweenMax.to("#pic2 .pic-2",1,{x:"100%",ease:Power0.easeIn})).addTo(t),new ScrollMagic.Scene({triggerElement:"#intro-slide",triggerHook:0,duration:"100%"}).setPin(".intro",{pushFollowers:!1}).setTween("#intro-text",1,{opacity:0,transform:"translateY(-100px)",ease:Power0.easeIn}).addTo(t),new ScrollMagic.Scene({triggerElement:"#mapid",triggerHook:1}).on("start",function(){isMobile.match||mapInit()}).reverse(!1).addTo(t),new ScrollMagic.Scene({triggerElement:"#video",triggerHook:1}).on("start",function(){videoPlay("https://www.youtube.com/embed/tViVIkxZQOI?autoplay=1&rel=0&amp;showinfo=0&amp")}).reverse(!1).addTo(t);$("#people li").on("click",function(){var t=$(this);t.hasClass("active")?t.removeClass("active"):t.addClass("active"),t.parent().children("li").not(t).removeClass("active")}),$(".audio-play").bind("focus blur",function(t){t.stopPropagation(),"focus"==t.type?$(t.target).closest("li").toggleClass("active-focus"):"blur"==t.type&&$(t.target).closest("li").toggleClass("active-focus")}),MediumLightbox("figure.zoom-effect");var o=document.getElementsByClassName("img");$(o).each(function(t){var e=o[t],i=$(this),n=!1;e.addEventListener("mouseover",function(){n||(i.after("<p>"+i.attr("alt")+"</p>"),n=!0)})})});