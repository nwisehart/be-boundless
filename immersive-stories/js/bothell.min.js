var isMobile=window.matchMedia("only screen and (max-width: 768px)");function isEmpty(e){return!$.trim(e.html())}function videoPlay(e){var t=e,i=$("#video"),a=$("body"),n=document.getElementById("boundless-video"),r='<button class="close-video"><span class="top"></span><span class="left"></span><span class="bottom"></span></button><div id="youtube-video"><iframe title="YouTube video" id="embedVid" width='+i.width()+" height="+i.height()+' src="'+t+'" frameborder="0" allowfullscreen autoplay></iframe></div>';isMobile.matches?(n.innerHTML=r,$(".play").click(function(e){e.preventDefault()})):$(".play").click(function(e){e.preventDefault(),n.innerHTML=r,setTimeout(function(){$("#video iframe")[0].focus()},500),$(".close-video").click(function(){$(".play").removeClass("hidden"),a.toggleClass("playing"),n.innerHTML=""}),a.toggleClass("playing")})}function MediumLightbox(e,t){"use strict";if(e){var c,u={},m=(t=t||{}).margin||50,i=document.createElement("div");i.className="scrollbar-measure",document.body.appendChild(i);var g=i.offsetWidth-i.clientWidth;document.body.removeChild(i),n(),window.addEventListener("resize",n);var a=document.querySelectorAll(e);Array.prototype.forEach.call(a,function(e,t){e.addEventListener("click",r)}),window.addEventListener("scroll",function(){c&&c.click()})}function n(){var e=window,t=document,i=t.documentElement,a=t.getElementsByTagName("body")[0],n=e.innerWidth||i.clientWidth||a.clientWidth,r=e.innerHeight||i.clientHeight||a.clientHeight;u.x=n,u.y=r}function r(){if($(this).parent().toggleClass("active"),this.isZoomed){this.isZoomed=!this.isZoomed,c=null,this.img.style.cssText="",this.wrapper.style.cssText="",this.overlay.className="zoomOverlay";d=this;setTimeout(function(){d.children[0].appendChild(d.img),d.children[0].removeChild(d.wrapper);var e="zoomImg";d.img.classList?d.img.classList.remove(e):d.img.className=d.img.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},300)}else{this.isZoomed=!this.isZoomed,(c=this).img||(this.img=this.getElementsByTagName("img")[0]);var e,t,i=this.img.getBoundingClientRect().height,a=this.img.getBoundingClientRect().width,n=this.img.getBoundingClientRect().left,r=this.img.getBoundingClientRect().top;t=this.img.dataset?(e=this.img.dataset.width,this.img.dataset.height):(e=this.img.getAttribute("data-width"),this.img.getAttribute("data-height")),this.img.classList?this.img.classList.add("zoomImg"):this.img.className+=" zoomImg",this.overlay=document.createElement("div"),this.overlay.id="the-overlay",this.overlay.className="zoomOverlay",this.overlay.style.cssText="height:"+u.y+"px; width: "+u.x+"px; top: -"+(u.y-i)/2+"px; left: -"+(u.x-a)/2+"px;",this.wrapper=document.createElement("div"),this.wrapper.id="the-wrapper",this.wrapper.className="zoomImg-wrap zoomImg-wrap--absolute",this.wrapper.appendChild(this.img),this.wrapper.appendChild(this.overlay),this.children[0].appendChild(this.wrapper);var o=(u.x-g)/2-n-a/2,s=-1*r+(u.y-i)/2,l=1;i<t&&(i==a&&u.y>u.x?l=(u.x-m)/a:i==a&&u.y<u.x?l=(u.y-m)/i:a<i?(l=(u.y-m)/i)*a>u.x&&(l=(u.x-m)/a):i<a&&(l=(u.x-m)/a)*i>u.y&&(l=(u.y-m)/i)),e<l*a&&(l=e/a);var d=this;setTimeout(function(){d.wrapper.style.cssText="transform: translate("+o+"px, "+s+"px) translateZ(0px);-webkit-transform: translate("+o+"px, "+s+"px) translateZ(0px);",d.img.style.cssText="transform: scale("+l+");-webkit-transform: scale("+l+")",d.overlay.className="zoomOverlay show"},0)}}}$(function(){var e=document.getElementById("immersive-give");e&&e.addEventListener("click",function(e){e.preventDefault();var t=$("#immersive-give-iframe");$(".giving-widget").addClass("active"),isEmpty(t)&&$("<iframe>",{src:"https://online.gifts.washington.edu/secure/makeagift/givingOpps.aspx?nobanner=true&source_typ=3&appeal="+e.target.getAttribute("data-appeal")+"&source="+e.target.getAttribute("data-fund"),frameborder:0,width:"100%",height:"auto"}).appendTo("#immersive-give-iframe"),setTimeout(function(){t.find("iframe").focus()},500)});var t=document.getElementById("immersive-give-promoted");t&&(t.addEventListener("click",function(e){e.preventDefault();var t=$("#immersive-give-iframe-promoted");$(".giving-widget-promoted").toggleClass("active"),isEmpty(t)&&$("<iframe>",{src:"https://online.gifts.washington.edu/secure/makeagift/givingOpps.aspx?nobanner=true&source_typ=3&appeal="+e.target.getAttribute("data-appeal")+"&source="+e.target.getAttribute("data-fund"),frameborder:0,width:"100%",height:"auto"}).appendTo("#immersive-give-iframe-promoted"),setTimeout(function(){t.find("iframe").focus()},500)}),$("#close-give").click(function(){$("#immersive-give-iframe-promoted").empty(),$(".giving-widget-promoted").toggleClass("active")})),$(".audio-ctrl").each(function(){var r=$(this);r.attr("aria-pressed","false"),r.click(function(e){e.preventDefault();for(var t=document.body.getElementsByTagName("audio"),i=0;i<t.length;i++)t[i].pause();var a=$(e.target).closest(".audio"),n=a.find("audio")[0];a.addClass("active-audio"),a.find("button").attr("aria-pressed","false"),r.attr("aria-pressed","true"),r.hasClass("audio-play")&&($("audio")[0].pause(),setTimeout(function(){n.play()},1e3)),r.hasClass("audio-pause")&&n.pause(),r.hasClass("audio-read")&&(a.find(".audio-transcript").removeClass("visually-hidden").focus(),a.toggleClass("trans"),r.hasClass("active-transcript")?(a.find(".audio-transcript").addClass("visually-hidden"),r.removeClass("active-transcript"),a.toggleClass("trans")):r.addClass("active-transcript"))})}),$(".read-more").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:document.getElementsByTagName("main")[0].getBoundingClientRect().top-80},{duration:1e3})}),$("#pause").click(function(){var e=$("#intro-vid video");e.get(0).paused?e.get(0).play():e.get(0).pause(),$("#intro-vid").toggleClass("paused")})}),$(function(){$("body").addClass("bothellIntro");document.getElementsByTagName("body")[0];var e=$(document).height(),t=$(window).height(),i=new ScrollMagic.Controller;currentController=i;new ScrollMagic.Scene({triggerElement:"body",triggerHook:0,duration:e,reverse:!0}).setTween("#bar span",{width:"23vh",ease:Power0.easeIn}).addTo(i);var a=new ScrollMagic.Scene({triggerElement:"#intro-slide",triggerHook:0,duration:"100%"}).setPin(".intro",{pushFollowers:!1}).setTween("#intro-text",.5,{opacity:0,transform:"translateY(100px)",ease:Power0.easeIn}).addTo(i),n=(new ScrollMagic.Scene({triggerElement:"#video",triggerHook:1}).on("start",function(){videoPlay("https://www.youtube.com/embed/SLSuhjJmcyM?theme=light;autoplay=1&rel=0&amp;showinfo=0&amp")}).reverse(!1).addTo(i),(new TimelineMax).add([TweenMax.to("#back",1,{transform:"translateY(-30px)",ease:Power0.easeIn}),TweenMax.to("#middle",1,{transform:"translateY(16vh)",ease:Power0.easeIn,delay:0}),TweenMax.to("#middle2",1,{transform:"translateY(8vh)",ease:Power0.easeIn,delay:0}),TweenMax.to("#middle3",1,{transform:"translateY(14vh)",ease:Power0.easeIn,delay:0}),TweenMax.to("#robot",1,{transform:"translateY(-100px)",ease:Power0.easeIn,delay:.3})])),r=new ScrollMagic.Scene({triggerElement:"#jason",triggerHook:.1,offset:$("#jason").height()-t,duration:"120%"}).setTween(n).addTo(i),o=(new TimelineMax).add([TweenMax.to("#trees .background",1,{transform:"translateY(0)",ease:Power0.easeIn}),TweenMax.to("#trees .middle",.5,{transform:"translateY(0)",ease:Power0.easeIn,delay:0}),TweenMax.to("#trees .fore",.3,{transform:"translateY(0)",ease:Power0.easeIn,delay:.1})]),s=new ScrollMagic.Scene({triggerElement:"#trees",triggerHook:.1,offset:$("#trees").height()-t,duration:"100%"}).setTween(o).addTo(i),l=(new TimelineMax).add([TweenMax.to("#cloud-1",1,{transform:"translateY(0)",ease:Power0.easeIn,delay:.1}),TweenMax.to("#cloud-2",1,{transform:"translateY(-100%)",ease:Power0.easeIn}),TweenMax.to("#moon",1,{transform:"translateY(0)",ease:Power0.easeIn,delay:.1})]),d=(new ScrollMagic.Scene({triggerElement:"#video",triggerHook:.1,offset:$("#video").height()-t,duration:"200%"}).setTween(l).addTo(i),(new TimelineMax).add([TweenMax.to("#swamp",1,{transform:"translateY(0)",ease:Power0.easeIn,delay:.1})])),c=new ScrollMagic.Scene({triggerElement:"#creating",triggerHook:.1,offset:$("#creating").height()-t,duration:"100%"}).setTween(d).addTo(i);$(window).resize(function(){a.update(!0),s.update(!0),r.update(!0),c.update(!0)});var u=document.getElementById("immersive-give-II");u&&u.addEventListener("click",function(e){e.preventDefault();var t=$("#immersive-give-II-iframe");isEmpty(t)&&$("<iframe>",{src:"https://online.gifts.washington.edu/secure/makeagift/givingOpps.aspx?nobanner=true&source_typ=3&appeal=17XIS&source="+e.target.getAttribute("data-fund"),frameborder:0,width:"100%",height:"auto"}).appendTo("#immersive-give-II-iframe"),setTimeout(function(){t.find("iframe").focus()},500)}),MediumLightbox("figure.zoom-effect");var m=document.getElementsByClassName("img");$(m).each(function(e){var t=m[e],i=$(this),a=!1;t.addEventListener("click",function(){a||(i.after("<p>"+i.attr("alt")+"</p>"),a=!0)})}),$("[data-tooltip]").click(function(){var e=$(this).find(".title");e.length?e.remove():$(this).append('<span class="title">'+$(this).attr("data-tooltip")+"</span>")})}),function(t,i){"function"==typeof define&&define.amd?define(["jquery"],function(e){return i(t,e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=i(t,require("jquery")):t.lity=i(t,t.jQuery||t.Zepto)}("undefined"!=typeof window?window:this,function(e,c){"use strict";var u=e.document,m=c(e),g=c.Deferred,p=c("html"),f=[],h="aria-hidden",v="lity-"+h,n='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',y={esc:!0,handler:null,handlers:{image:T,inline:function(e,t){var i,a,n;try{i=c(e)}catch(e){return!1}return!!i.length&&(a=c('<i style="display:none !important"/>'),n=i.hasClass("lity-hide"),t.element().one("lity:remove",function(){a.before(i).remove(),n&&!i.closest(".lity-content").length&&i.addClass("lity-hide")}),i.removeClass("lity-hide").after(a))},youtube:function(e){var t=i.exec(e);return!!t&&C(x(e,d("https://www.youtube"+(t[2]||"")+".com/embed/"+t[4],c.extend({autoplay:1},l(t[5]||"")))))},vimeo:function(e){var t=a.exec(e);return!!t&&C(x(e,d("https://player.vimeo.com/video/"+t[3],c.extend({autoplay:1},l(t[4]||"")))))},googlemaps:function(e){var t=r.exec(e);return!!t&&C(x(e,d("https://www.google."+t[3]+"/maps?"+t[6],{output:0<t[6].indexOf("layer=c")?"svembed":"embed"})))},facebookvideo:function(e){var t=o.exec(e);if(!t)return!1;0!==e.indexOf("http")&&(e="https:"+e);return C(x(e,d("https://www.facebook.com/plugins/video.php?href="+e,c.extend({autoplay:1},l(t[4]||"")))))},iframe:C},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'},t=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,i=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,a=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,r=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,o=/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i,s=function(){var e=u.createElement("div"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return t[i];return!1}();function w(e){var t=g();return s&&e.length?(e.one(s,t.resolve),setTimeout(t.resolve,500)):t.resolve(),t.promise()}function b(e,t,i){if(1===arguments.length)return c.extend({},e);if("string"==typeof t){if(void 0===i)return void 0===e[t]?null:e[t];e[t]=i}else c.extend(e,t);return this}function l(e){for(var t,i=decodeURI(e.split("#")[0]).split("&"),a={},n=0,r=i.length;n<r;n++)i[n]&&(a[(t=i[n].split("="))[0]]=t[1]);return a}function d(e,t){return e+(-1<e.indexOf("?")?"&":"?")+c.param(t)}function x(e,t){var i=e.indexOf("#");return-1===i?t:(0<i&&(e=e.substr(i)),t+e)}function T(e,t){function i(){r.reject(function(e){return c('<span class="lity-error"/>').append(e)}("Failed loading image"))}var a=t.opener()&&t.opener().data("lity-desc")||"Image with no description",n=c('<img src="'+e+'" alt="'+a+'"/>'),r=g();return n.on("load",function(){if(0===this.naturalWidth)return i();r.resolve(n)}).on("error",i),r.promise()}function C(e){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+e+'"/></div>'}function $(){return u.documentElement.clientHeight?u.documentElement.clientHeight:Math.round(m.height())}function E(e){var t=M();t&&(27===e.keyCode&&t.options("esc")&&t.close(),9===e.keyCode&&function(e,t){var i=t.element().find(n),a=i.index(u.activeElement);e.shiftKey&&a<=0?(i.get(i.length-1).focus(),e.preventDefault()):e.shiftKey||a!==i.length-1||(i.get(0).focus(),e.preventDefault())}(e,t))}function k(){c.each(f,function(e,t){t.resize()})}function M(){return 0===f.length?null:f[0]}function I(e,t,i,a){var n,r,o,s=this,l=!1,d=!1;t=c.extend({},y,t),r=c(t.template),s.element=function(){return r},s.opener=function(){return i},s.options=c.proxy(b,s,t),s.handlers=c.proxy(b,s,t.handlers),s.resize=function(){l&&!d&&o.css("max-height",$()+"px").trigger("lity:resize",[s])},s.close=function(){if(l&&!d){d=!0,function(t){t.element().attr(h,"true"),1===f.length&&(p.removeClass("lity-active"),m.off({resize:k,keydown:E})),((f=c.grep(f,function(e){return t!==e})).length?f[0].element():c(".lity-hidden")).removeClass("lity-hidden").each(function(){var e=c(this),t=e.data(v);t?e.attr(h,t):e.removeAttr(h),e.removeData(v)})}(s);var e=g();if(a&&(u.activeElement===r[0]||c.contains(r[0],u.activeElement)))try{a.focus()}catch(e){}return o.trigger("lity:close",[s]),r.removeClass("lity-opened").addClass("lity-closed"),w(o.add(r)).always(function(){o.trigger("lity:remove",[s]),r.remove(),r=void 0,e.resolve()}),e.promise()}},n=function(i,a,n,e){var r,o="inline",s=c.extend({},n);return e&&s[e]?(r=s[e](i,a),o=e):(c.each(["inline","iframe"],function(e,t){delete s[t],s[t]=n[t]}),c.each(s,function(e,t){return!t||(!(!t.test||t.test(i,a))||(!1!==(r=t(i,a))?(o=e,!1):void 0))})),{handler:o,content:r||""}}(e,s,t.handlers,t.handler),r.attr(h,"false").addClass("lity-loading lity-opened lity-"+n.handler).appendTo("body").focus().on("click","[data-lity-close]",function(e){c(e.target).is("[data-lity-close]")&&s.close()}).trigger("lity:open",[s]),function(e){1===f.unshift(e)&&(p.addClass("lity-active"),m.on({resize:k,keydown:E})),c("body > *").not(e.element()).addClass("lity-hidden").each(function(){var e=c(this);void 0===e.data(v)&&e.data(v,e.attr(h)||null)}).attr(h,"true")}(s),c.when(n.content).always(function(e){o=c(e).css("max-height",$()+"px"),r.find(".lity-loader").each(function(){var e=c(this);w(e).always(function(){e.remove()})}),r.removeClass("lity-loading").find(".lity-content").empty().append(o),l=!0,o.trigger("lity:ready",[s])})}function S(e,t,i){e.preventDefault?(e.preventDefault(),e=(i=c(this)).data("lity-target")||i.attr("href")||i.attr("src")):i=c(i);var a=new I(e,c.extend({},i.data("lity-options")||i.data("lity"),t),i,u.activeElement);if(!e.preventDefault)return a}return T.test=function(e){return t.test(e)},S.version="@VERSION",S.options=c.proxy(b,S,y),S.handlers=c.proxy(b,S,y.handlers),S.current=M,c(u).on("click.lity","[data-lity]",S),S});