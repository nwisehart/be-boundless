var isMobile=window.matchMedia("only screen and (max-width: 768px)");function isEmpty(e){return!$.trim(e.html())}function videoPlay(e){var t=e,i=$("#video"),n=$("body"),a=document.getElementById("boundless-video"),o='<button class="close-video"><span class="top"></span><span class="left"></span><span class="bottom"></span></button><div id="youtube-video"><iframe title="YouTube video" id="embedVid" width='+i.width()+" height="+i.height()+' src="'+t+'" frameborder="0" allowfullscreen autoplay></iframe></div>';isMobile.matches?(a.innerHTML=o,$(".play").click(function(e){e.preventDefault()})):$(".play").click(function(e){e.preventDefault(),a.innerHTML=o,setTimeout(function(){$("#video iframe")[0].focus()},500),$(".close-video").click(function(){$(".play").removeClass("hidden"),n.toggleClass("playing"),a.innerHTML=""}),n.toggleClass("playing")})}$(function(){var e=document.getElementById("immersive-give");e&&e.addEventListener("click",function(e){e.preventDefault();var t=$("#immersive-give-iframe");$(".giving-widget").addClass("active"),isEmpty(t)&&$("<iframe>",{src:"https://online.gifts.washington.edu/secure/makeagift/givingOpps.aspx?nobanner=true&source_typ=3&appeal="+e.target.getAttribute("data-appeal")+"&source="+e.target.getAttribute("data-fund"),frameborder:0,width:"100%",height:"auto"}).appendTo("#immersive-give-iframe"),setTimeout(function(){t.find("iframe").focus()},500)});var t=document.getElementById("immersive-give-promoted");t&&(t.addEventListener("click",function(e){e.preventDefault();var t=$("#immersive-give-iframe-promoted");$(".giving-widget-promoted").toggleClass("active"),isEmpty(t)&&$("<iframe>",{src:"https://online.gifts.washington.edu/secure/makeagift/givingOpps.aspx?nobanner=true&source_typ=3&appeal="+e.target.getAttribute("data-appeal")+"&source="+e.target.getAttribute("data-fund"),frameborder:0,width:"100%",height:"auto"}).appendTo("#immersive-give-iframe-promoted"),setTimeout(function(){t.find("iframe").focus()},500)}),$("#close-give").click(function(){$("#immersive-give-iframe-promoted").empty(),$(".giving-widget-promoted").toggleClass("active")})),$(".audio-ctrl").each(function(){var o=$(this);o.attr("aria-pressed","false"),o.click(function(e){e.preventDefault();for(var t=document.body.getElementsByTagName("audio"),i=0;i<t.length;i++)t[i].pause();var n=$(e.target).closest(".audio"),a=n.find("audio")[0];n.addClass("active-audio"),n.find("button").attr("aria-pressed","false"),o.attr("aria-pressed","true"),o.hasClass("audio-play")&&($("audio")[0].pause(),setTimeout(function(){a.play()},1e3)),o.hasClass("audio-pause")&&a.pause(),o.hasClass("audio-read")&&(n.find(".audio-transcript").removeClass("visually-hidden").focus(),n.toggleClass("trans"),o.hasClass("active-transcript")?(n.find(".audio-transcript").addClass("visually-hidden"),o.removeClass("active-transcript"),n.toggleClass("trans")):o.addClass("active-transcript"))})}),$(".read-more").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:document.getElementsByTagName("main")[0].getBoundingClientRect().top-80},{duration:1e3})}),$("#pause").click(function(){var e=$("#intro-vid video");e.get(0).paused?e.get(0).play():e.get(0).pause(),$("#intro-vid").toggleClass("paused")})}),function(t,i){"function"==typeof define&&define.amd?define(["jquery"],function(e){return i(t,e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=i(t,require("jquery")):t.lity=i(t,t.jQuery||t.Zepto)}("undefined"!=typeof window?window:this,function(e,c){"use strict";var u=e.document,f=c(e),p=c.Deferred,m=c("html"),g=[],v="aria-hidden",y="lity-"+v,a='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',h={esc:!0,handler:null,handlers:{image:x,inline:function(e,t){var i,n,a;try{i=c(e)}catch(e){return!1}return!!i.length&&(n=c('<i style="display:none !important"/>'),a=i.hasClass("lity-hide"),t.element().one("lity:remove",function(){n.before(i).remove(),a&&!i.closest(".lity-content").length&&i.addClass("lity-hide")}),i.removeClass("lity-hide").after(n))},youtube:function(e){var t=i.exec(e);return!!t&&k($(e,d("https://www.youtube"+(t[2]||"")+".com/embed/"+t[4],c.extend({autoplay:1},l(t[5]||"")))))},vimeo:function(e){var t=n.exec(e);return!!t&&k($(e,d("https://player.vimeo.com/video/"+t[3],c.extend({autoplay:1},l(t[4]||"")))))},googlemaps:function(e){var t=o.exec(e);return!!t&&k($(e,d("https://www.google."+t[3]+"/maps?"+t[6],{output:0<t[6].indexOf("layer=c")?"svembed":"embed"})))},facebookvideo:function(e){var t=r.exec(e);if(!t)return!1;0!==e.indexOf("http")&&(e="https:"+e);return k($(e,d("https://www.facebook.com/plugins/video.php?href="+e,c.extend({autoplay:1},l(t[4]||"")))))},iframe:k},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'},t=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,i=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,n=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,o=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,r=/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i,s=function(){var e=u.createElement("div"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return t[i];return!1}();function b(e){var t=p();return s&&e.length?(e.one(s,t.resolve),setTimeout(t.resolve,500)):t.resolve(),t.promise()}function w(e,t,i){if(1===arguments.length)return c.extend({},e);if("string"==typeof t){if(void 0===i)return void 0===e[t]?null:e[t];e[t]=i}else c.extend(e,t);return this}function l(e){for(var t,i=decodeURI(e.split("#")[0]).split("&"),n={},a=0,o=i.length;a<o;a++)i[a]&&(n[(t=i[a].split("="))[0]]=t[1]);return n}function d(e,t){return e+(-1<e.indexOf("?")?"&":"?")+c.param(t)}function $(e,t){var i=e.indexOf("#");return-1===i?t:(0<i&&(e=e.substr(i)),t+e)}function x(e,t){function i(){o.reject(function(e){return c('<span class="lity-error"/>').append(e)}("Failed loading image"))}var n=t.opener()&&t.opener().data("lity-desc")||"Image with no description",a=c('<img src="'+e+'" alt="'+n+'"/>'),o=p();return a.on("load",function(){if(0===this.naturalWidth)return i();o.resolve(a)}).on("error",i),o.promise()}function k(e){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+e+'"/></div>'}function C(){return u.documentElement.clientHeight?u.documentElement.clientHeight:Math.round(f.height())}function T(e){var t=z();t&&(27===e.keyCode&&t.options("esc")&&t.close(),9===e.keyCode&&function(e,t){var i=t.element().find(a),n=i.index(u.activeElement);e.shiftKey&&n<=0?(i.get(i.length-1).focus(),e.preventDefault()):e.shiftKey||n!==i.length-1||(i.get(0).focus(),e.preventDefault())}(e,t))}function E(){c.each(g,function(e,t){t.resize()})}function z(){return 0===g.length?null:g[0]}function D(e,t,i,n){var a,o,r,s=this,l=!1,d=!1;t=c.extend({},h,t),o=c(t.template),s.element=function(){return o},s.opener=function(){return i},s.options=c.proxy(w,s,t),s.handlers=c.proxy(w,s,t.handlers),s.resize=function(){l&&!d&&r.css("max-height",C()+"px").trigger("lity:resize",[s])},s.close=function(){if(l&&!d){d=!0,function(t){t.element().attr(v,"true"),1===g.length&&(m.removeClass("lity-active"),f.off({resize:E,keydown:T})),((g=c.grep(g,function(e){return t!==e})).length?g[0].element():c(".lity-hidden")).removeClass("lity-hidden").each(function(){var e=c(this),t=e.data(y);t?e.attr(v,t):e.removeAttr(v),e.removeData(y)})}(s);var e=p();if(n&&(u.activeElement===o[0]||c.contains(o[0],u.activeElement)))try{n.focus()}catch(e){}return r.trigger("lity:close",[s]),o.removeClass("lity-opened").addClass("lity-closed"),b(r.add(o)).always(function(){r.trigger("lity:remove",[s]),o.remove(),o=void 0,e.resolve()}),e.promise()}},a=function(i,n,a,e){var o,r="inline",s=c.extend({},a);return e&&s[e]?(o=s[e](i,n),r=e):(c.each(["inline","iframe"],function(e,t){delete s[t],s[t]=a[t]}),c.each(s,function(e,t){return!t||(!(!t.test||t.test(i,n))||(!1!==(o=t(i,n))?(r=e,!1):void 0))})),{handler:r,content:o||""}}(e,s,t.handlers,t.handler),o.attr(v,"false").addClass("lity-loading lity-opened lity-"+a.handler).appendTo("body").focus().on("click","[data-lity-close]",function(e){c(e.target).is("[data-lity-close]")&&s.close()}).trigger("lity:open",[s]),function(e){1===g.unshift(e)&&(m.addClass("lity-active"),f.on({resize:E,keydown:T})),c("body > *").not(e.element()).addClass("lity-hidden").each(function(){var e=c(this);void 0===e.data(y)&&e.data(y,e.attr(v)||null)}).attr(v,"true")}(s),c.when(a.content).always(function(e){r=c(e).css("max-height",C()+"px"),o.find(".lity-loader").each(function(){var e=c(this);b(e).always(function(){e.remove()})}),o.removeClass("lity-loading").find(".lity-content").empty().append(r),l=!0,r.trigger("lity:ready",[s])})}function M(e,t,i){e.preventDefault?(e.preventDefault(),e=(i=c(this)).data("lity-target")||i.attr("href")||i.attr("src")):i=c(i);var n=new D(e,c.extend({},i.data("lity-options")||i.data("lity"),t),i,u.activeElement);if(!e.preventDefault)return n}return x.test=function(e){return t.test(e)},M.version="@VERSION",M.options=c.proxy(w,M,h),M.handlers=c.proxy(w,M,h.handlers),M.current=z,c(u).on("click.lity","[data-lity]",M),M}),$(function(){var e=$(window).width()<768,t={"#slide-1":"0.0","#slide-2":"0.5","#slide-3":"1.0"},i=new ScrollMagic.Controller,n=new ScrollMagic.Scene({triggerElement:"#intro-vid",triggerHook:0,duration:"100%"}).setPin(".intro",{pushFollowers:!1}).setTween("#intro-text",1,{opacity:0,transform:"translateY(-100px)",ease:Power0.easeIn}).addTo(i);if($(window).resize(function(){n.update(!0)}),e)new ScrollMagic.Scene({triggerElement:"#lazyloadgif",triggerHook:.5,reverse:!1}).on("start",function(){$gif5=$("#lazyloadgif"),$src5=$gif5.attr("src"),$gif5.attr("src",""),$gif5.attr("src",$src5+"?")}).addTo(i);else var a=new ScrollMagic.Scene({triggerElement:"#lazyloadgif",triggerHook:.5,reverse:!1}).on("start",function(){$gif5=$("#lazyloadgif"),$src5=$gif5.attr("src"),$gif5.attr("src",""),$gif5.attr("src",$src5+"?")}),o=(new TimelineMax).to("#secondary-wrapper",1,{x:"-33%"}).to("#horizontal-image-2",1,{opacity:1,visibility:"visible"},"-=1.0").to("#horizontal-image-1",1,{opacity:0},"-=1.0").to("#marker-2",1,{opacity:.95},"-=1.0").to("#marker-1",1,{opacity:.25},"-=1.0").to("#marker-3",1,{opacity:.25},"-=1.0").to("#secondary-wrapper",1,{x:"-67%"}).to("#horizontal-image-3",1,{opacity:1,visibility:"visible"},"-=1.0").to("#horizontal-image-2",1,{opacity:0},"-=1.0").to("#marker-3",1,{opacity:.95},"-=1.0").to("#marker-2",1,{opacity:.25},"-=1.0").to("#marker-1",1,{opacity:.25},"-=1.0").to(["#marker-1","#marker-2","#marker-3"],0,{opacity:0}).to("#marker-4",0,{opacity:1,visibility:"visible"}),r=new ScrollMagic.Scene({triggerElement:"#primary-wrapper",triggerHook:"onLeave",duration:"400%"}).setPin("#primary-wrapper").setTween(o).on("end",function(){$("#lazyloadgif").addClass("active"),a.addTo(i)}).addTo(i);$("[data-href]").click(function(){$destination=$(this).attr("data-href"),"#charts"!=$destination?($xOff=t[$destination],TweenLite.to(o,1,{progress:$xOff,ease:Power2.easeOut}),o.progress($xOff,!0),r.update(!0)):$("html, body").animate({scrollTop:$($destination).offset().top},1e3)})});